<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qing90bing的主页</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.css" />
    <script src="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 自定义样式 */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* 防止出现双滚动条 */
        }
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #0d1a26;
            color: #e0e0e0;
        }

        /* 背景图片容器 */
        #bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #time-display, .runtime-number {
            font-variant-numeric: tabular-nums;
        }
        
        #time-display {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(137, 207, 240, 0.5);
        }

        .simplebar-scrollbar:before {
            background-color: rgba(137, 207, 240, 0.6);
            border-radius: 4px;
        }
        .simplebar-track.simplebar-vertical {
            width: 8px;
        }

        /* [FIXED] Q弹动画 - 移除了opacity属性以修复背景透明问题 */
        @keyframes bounce-in {
            0% { transform: scale(0.95); }
            60% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .bounce-in {
            animation: bounce-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* 进度条样式 */
        .progress-bar {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-bar-inner {
            background-color: #38bdf8; /* sky-500 */
            border-radius: 9999px;
            transition: width 0.5s ease-out;
        }
        
        /* 高亮最近的节日 */
        .highlight-holiday {
            background-color: rgba(56, 189, 248, 0.15);
            border-left: 3px solid #38bdf8;
        }
    </style>
</head>
<body>
    <div id="bg-container"></div>
    <div data-simplebar style="height: 100vh;">
        <div class="flex items-center justify-center min-h-screen px-8 sm:px-16 lg:px-24">
            <main class="grid grid-cols-1 lg:grid-cols-4 gap-5 w-full max-w-6xl">

                <div class="lg:col-span-1 space-y-5 flex flex-col">
                    <div class="glass-card flex items-center justify-center p-5 gap-4">
                        <h1 class="text-3xl font-bold text-white">Qing90bing</h1>
                    </div>

                    <div id="countdown-card" class="glass-card p-5 cursor-pointer">
                        <h2 class="text-xl font-semibold text-white mb-3 text-center">日历倒计时</h2>
                        <div id="countdown-display" class="text-center text-lg text-sky-300 leading-relaxed">正在计算...</div>
                    </div>
                    
                    <div id="profile-card" class="glass-card p-5 flex flex-col justify-between flex-grow cursor-pointer">
                        <div class="relative px-4 py-2">
                            <span class="absolute top-0 left-0 text-6xl text-white/20 font-serif -translate-y-4 -translate-x-2 select-none">“</span>
                            <p class="text-lg">Hello, World!</p>
                            <p class="text-gray-300 mt-1">一个建立于21世纪的小站，存活于互联网的边缘</p>
                            <span class="absolute bottom-0 right-0 text-6xl text-white/20 font-serif translate-y-6 translate-x-2 select-none">”</span>
                        </div>
                        <div class="mt-8">
                            <p class="text-sm text-gray-400 mb-4">与我联系:</p>
                            <div class="flex items-center gap-5">
                                <a href="https://github.com/Qing90bing" target="_blank" class="text-gray-300 hover:text-white transition-colors" title="GitHub">
                                    <svg class="w-7 h-7" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                                </a>
                                <a href="mailto:1879495519@qq.com" target="_blank" class="text-gray-300 hover:text-white transition-colors" title="Email">
                                    <svg class="w-7 h-7" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Email</title><path fill="currentColor" d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"/></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="right-column" class="lg:col-span-3 space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div class="glass-card p-5 flex flex-col justify-center items-center">
                            <div id="date-display" class="text-lg text-gray-300"></div>
                            <div id="time-display" class="text-6xl text-white my-1"></div>
                            <div id="greeting" class="text-sm text-gray-400"></div>
                        </div>
                        <div id="hitokoto-card" class="glass-card p-5 flex flex-col justify-center cursor-pointer min-h-[120px] md:min-h-full">
                            <p id="hitokoto-text" class="text-center text-gray-200 transition-opacity duration-500 ease-in-out">正在加载一言...</p>
                            <p id="hitokoto-from" class="text-right text-sm text-gray-400 mt-2 transition-opacity duration-500 ease-in-out"></p>
                        </div>
                    </div>
                    
                    <div class="glass-card p-5">
                        <h2 class="text-xl font-semibold text-white mb-4">
                           <svg class="inline-block w-6 h-6 mr-2 -mt-1" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                           GitHub 贡献图
                        </h2>
                        <a href="https://github.com/Qing90bing" target="_blank">
                            <img src="https://ghchart.rshah.org/Qing90bing?theme=dark" alt="Qing90bing's GitHub Contribution Graph" class="w-full rounded-md p-2 bg-gray-800/50"/>
                        </a>

                        <h2 class="text-xl font-semibold text-white mb-4 mt-6">
                            <svg class="inline-block w-6 h-6 mr-2 -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>
                            网站列表
                        </h2>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <a href="https://qing90bing.github.io/QingNoteblog/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <span class="font-medium">博客</span>
                            </a>
                            <a href="https://qing90bing.github.io/Qing_Music/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"></path></svg>
                                <span class="font-medium">音乐</span>
                            </a>
                            <a href="https://qing90bing.github.io/Qing_Start/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                                <span class="font-medium">起始页</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Holiday List Card -->
                <div id="holiday-list-card" class="lg:col-span-3 glass-card p-5 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-white">节日倒数列表</h2>
                        <div class="flex items-center gap-4 text-lg">
                            <button id="prev-year" title="上一年" class="px-2 rounded-md text-gray-400 hover:text-white hover:bg-white/10 transition-colors">&lt;</button>
                            <span id="holiday-list-year" class="font-bold text-white w-16 text-center">2025</span>
                            <button id="next-year" title="下一年" class="px-2 rounded-md text-gray-400 hover:text-white hover:bg-white/10 transition-colors">&gt;</button>
                        </div>
                        <button id="close-holiday-list" title="关闭" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div id="holiday-list-container-wrapper" class="overflow-y-auto" style="max-height: 65vh;">
                       <div id="holiday-list-container" class="space-y-4">
                           <!-- Holiday list will be dynamically inserted here -->
                       </div>
                    </div>
                </div>

                <!-- Time Capsule Card -->
                <div id="time-capsule-card" class="lg:col-span-3 glass-card p-5 hidden flex flex-col">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold text-white">时光胶囊</h2>
                        <button id="close-time-capsule" title="关闭" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="space-y-5">
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>今日已过 <span id="day-passed">0</span> 小时</span>
                                <span>剩余 <span id="day-left">24</span> 小时</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="day-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="day-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>本周已过 <span id="week-passed">0</span> 天</span>
                                <span>剩余 <span id="week-left">7</span> 天</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="week-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="week-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>本月已过 <span id="month-passed">0</span> 天</span>
                                <span>剩余 <span id="month-left">30</span> 天</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="month-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="month-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>今年已过 <span id="year-passed">0</span> 天</span>
                                <span>剩余 <span id="year-left">365</span> 天</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="year-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="year-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 text-center text-gray-300">
                        <p id="site-runtime-display">正在计算...</p>
                    </div>
                </div>

            </main>
        </div>
    </div>
    
    <script>
        // --- 初始状态和常量 ---
        const lunarInfo = [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2, 0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977, 0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970, 0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950, 0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557, 0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5d0, 0x14573, 0x052d0, 0x0a9a8, 0x0e950, 0x06aa0, 0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0, 0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b5a0, 0x195a6, 0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570, 0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0, 0x0c960, 0xd954, 0x0d4a0, 0xda50, 0x07552, 0x056a0, 0xabb7, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, 0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, 0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0];
        const solarTerm = ["小寒", "大寒", "立春", "雨水", "惊蛰", "春分", "清明", "谷雨", "立夏", "小满", "芒种", "夏至", "小暑", "大暑", "立秋", "处暑", "白露", "秋分", "寒露", "霜降", "立冬", "小雪", "大雪", "冬至"];
        const sTermInfo = [0, 21208, 42467, 63836, 85337, 107014, 128867, 150921, 173149, 195551, 218072, 240693, 263343, 285989, 308563, 331033, 353350, 375494, 397447, 419210, 440795, 462224, 483532, 504758];
        const sFtv = ["0101 元旦", "0214 情人节", "0308 妇女节", "0312 植树节", "0401 愚人节", "0501 劳动节", "0504 青年节", "0601 儿童节", "0701 建党节", "0801 建军节", "0815 日本投降日", "0903 抗战胜利纪念日", "0910 教师节", "1001 国庆节", "1213 国家公祭日", "1225 圣诞节"];
        const lFtv = ["0101 春节", "0115 元宵节", "0505 端午节", "0707 七夕", "0815 中秋节", "0909 重阳节", "1208 腊八节"];
        let holidayListDisplayedYear = new Date().getFullYear();

        // --- DOM 元素获取 ---
        const bgContainer = document.getElementById('bg-container');
        const countdownCard = document.getElementById('countdown-card');
        const profileCard = document.getElementById('profile-card');
        const rightColumn = document.getElementById('right-column');
        const timeCapsuleCard = document.getElementById('time-capsule-card');
        const holidayListCard = document.getElementById('holiday-list-card');

        // --- 设置随机背景图片 ---
        function setRandomBackground() {
            const myImages = [
                'https://s21.ax1x.com/2025/08/10/pVdEmM6.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEnsK.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEuqO.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEQde.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEMZD.jpg'
            ];
            const randomImageUrl = myImages[Math.floor(Math.random() * myImages.length)];
            const img = new Image();
            img.src = randomImageUrl;
            img.onload = () => {
                bgContainer.style.backgroundImage = `url('${randomImageUrl}')`;
                bgContainer.style.opacity = 1;
            };
        }
        
        // --- 动态时钟功能 ---
        function updateTime() {
            const timeDisplay = document.getElementById('time-display');
            const dateDisplay = document.getElementById('date-display');
            const now = new Date();
            timeDisplay.textContent = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
            const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
            dateDisplay.textContent = `${now.getFullYear()}年${String(now.getMonth() + 1).padStart(2, '0')}月${String(now.getDate()).padStart(2, '0')}日 ${weekdays[now.getDay()]}`;
        }

        // --- 问候语功能 ---
        function updateGreeting() {
            const greetingEl = document.getElementById('greeting');
            const now = new Date();
            const hour = now.getHours();
            const month = now.getMonth() + 1; // getMonth() 返回 0-11, +1 变为 1-12

            // 定义问候语库
            const greetings = {
                spring: { // 春季 (3-5月)
                    morning: [
                        "早上好，春意盎然，愿你的一天如诗如画。🌿",
                        "清晨的露水，伴着花香，道一声早安。🌸",
                        "春日黎明，万物复苏，今天也要活力满满！",
                        "早安，愿春风为你吹来一天的好运。🍃",
                        "听，窗外是不是有鸟儿在歌唱？早安！🐦",
                        "新的一天，从一个清新的春日早晨开始。",
                        "一年之计在于春，一日之计在于晨，加油！",
                        "拉开窗帘，让第一缕春光拥抱你。☀️"
                    ],
                    afternoon: [
                        "下午好，春日暖阳，适合小憩片刻。☀️",
                        "午后时光，泡杯花茶，享受春日的悠闲吧。🍵",
                        "愿你心情如春日午后的阳光，明媚不忧伤。",
                        "春天到，别春困，起来活动一下筋骨吧！",
                        "天气这么好，不去公园散散步吗？",
                        "午后的阳光，暖得让人想打瞌睡。😴",
                        "泡一壶龙井，静品春日的午后时光。",
                        "春雷阵阵，说不定会有一场春雨，记得带伞。"
                    ],
                    evening: [
                        "晚上好，春风拂面，一天的疲惫都消散了。🎑",
                        "夜幕降临，静享春夜的温柔与宁静。",
                        "春夜的星空格外明朗，祝你晚安好梦。✨",
                        "在温柔的春夜里，和世界道一句晚安。",
                        "春天的晚霞总是格外温柔，晚上好。",
                        "忙碌了一天，是时候享受一顿美味的晚餐了。🍲",
                        "晚风轻轻，吹来青草和泥土的芬芳。",
                        "今晚月色真美，风也温柔，祝你愉快。"
                    ],
                    night: [
                        "夜深了，春夜微凉，记得盖好被子。🌙",
                        "晚安，愿你在梦里与最美的春天相遇。",
                        "放下手机，闭上眼睛，聆听春虫的鸣叫。😴",
                        "夜阑人静，祝你安眠，明日又是崭新的一天。",
                        "春夜宁静，宜读一本闲书，安然入睡。",
                        "把今天份的开心打包，睡个好觉吧。",
                        "晚安，愿你的梦里繁花似锦。🌸",
                        "夜了，全世界都睡了，你也要早点休息。"
                    ]
                },
                summer: { // 夏季 (6-8月)
                    morning: [
                        "早上好，夏日清晨，阳光正好，微风不燥。☀️",
                        "早安！今天也是元气满满的一天，别怕热！",
                        "夏日的清晨，是西瓜味的，是冰汽水味的。🍉",
                        "蝉鸣声声，唤醒了夏天的早晨，早安！",
                        "早安！今天的太阳也很热情呢！",
                        "赶在热浪来临前，享受清晨的片刻凉爽吧。",
                        "又是被阳光叫醒的一天，你好呀！🌞",
                        "新的一天，像加了冰块的汽水，充满活力！"
                    ],
                    afternoon: [
                        "下午好，夏日炎炎，记得多喝水防暑哦。💧",
                        "午后困倦，来根冰棍提提神吧！🍦",
                        "心静自然凉，愿你拥有一个清爽的下午。",
                        "夏日午后，宜开空调，宜听音乐，宜想你。😉",
                        "热到融化的下午，你还好吗？",
                        "“哪儿凉快哪儿待着去”绝对是夏天最真诚的祝福。",
                        "可能会有雷阵雨，出门记得带伞哦。⛈️",
                        "这个钟点，唯有空调和西瓜不可辜负。🍉"
                    ],
                    evening: [
                        "晚上好，夏夜晚风，吹散白天的燥热。🎐",
                        "提着一瓶汽水，坐在台阶上，感受夏天的晚风。",
                        "属于夏天的夜晚，是烧烤、小龙虾和冰啤酒。🍻",
                        "晚风轻踩着云朵，月亮在贩售快乐，晚安！",
                        "晚风吹走了热气，带来了夏夜的惬意。",
                        "又到了可以去夜市逛吃逛吃的季节！",
                        "小时候的夏夜，是蒲扇、凉席和满天繁星。✨",
                        "晚上好，去散散步吧，说不定能看到萤火虫。"
                    ],
                    night: [
                        "夜深了，晚安，愿你的梦里有凉爽的夏风。🌌",
                        "仲夏夜之梦，愿你拥抱整片星空。✨",
                        "关掉空调，可能会热；不关，可能会感冒。你看着办吧！",
                        "晚安，月亮警察已就位，请安心入睡。👮",
                        "嘘，静下心来，听听窗外的虫鸣。",
                        "晚安，空调调到26度刚刚好哦。😉",
                        "别熬夜了，你的皮肤和头发都需要休息。",
                        "祝你做个凉爽的梦，梦里没有蚊子。🦟"
                    ]
                },
                autumn: { // 秋季 (9-11月)
                    morning: [
                        "早上好，秋高气爽，天朗气清，又是美好的一天。🍁",
                        "早安，空气中有了秋天的味道，深呼吸一下吧。",
                        "秋日的晨光，温柔地洒在每一片落叶上，早安。",
                        "天凉了，记得多穿件衣服，别感冒了哦。🧥",
                        "秋日的天空，蓝得像一块画布，早安。",
                        "早晨的空气微凉，记得添一件薄外套。",
                        "秋天，是一个让一切都沉静下来的季节，早。",
                        "又是被梦想叫醒的一天，加油，打工人！"
                    ],
                    afternoon: [
                        "下午好，秋日的午后，阳光温暖得刚刚好。☕️",
                        "捧一杯热茶，读一本好书，享受秋日的静谧。",
                        "秋天是收获的季节，愿你的努力都有回报。",
                        "午安，愿秋风带走你的烦恼和疲惫。🍂",
                        "秋日的午后，每一帧都像电影画面。🎬",
                        "阳光正好，温度也正好，一切都刚刚好。",
                        "来块烤红薯或是糖炒栗子怎么样？🌰",
                        "下午犯困的话，就看看窗外的蓝天白云吧。"
                    ],
                    evening: [
                        "晚上好，秋风送爽，月色宜人。🌕",
                        "丹桂飘香的夜晚，适合思念和团圆。",
                        "秋天的夜晚，是思念的季节，也是养膘的季节。",
                        "晚来秋，天凉如水，早点休息吧。",
                        "晚上好，今天你看到美丽的落日了吗？",
                        "秋天的夜晚，总让人感觉格外宁静和舒适。",
                        "天气转凉，晚餐要吃得暖暖和和的。",
                        "月亮挂在枝头，像一颗熟透的果子。晚安。"
                    ],
                    night: [
                        "夜深了，秋意渐浓，晚安好梦。🌙",
                        "愿你伴着窗外的桂花香，甜甜地进入梦乡。",
                        "天阶夜色凉如水，卧看牵牛织女星。晚安。",
                        "被子要盖厚一点了，夜里会降温的。😴",
                        "夜深了，把心事放一边，好好睡觉最重要。",
                        "最舒服的事，莫过于在微凉的秋夜里盖着柔软的被子。",
                        "晚安，愿你梦里有金色的麦田和果实。",
                        "明天会更好，快睡吧。"
                    ]
                },
                winter: { // 冬季 (12-2月)
                    morning: [
                        "早上好，虽然天气寒冷，但也要拥抱阳光哦。❄️",
                        "早安，冬天最幸福的事，就是醒来时窗外有阳光。",
                        "起床大作战开始了！祝你成功！💪",
                        "冬日清晨，来一杯热饮，温暖一整天。☕️",
                        "早安！今天你和你的床分离成功了吗？",
                        "窗户上结了霜花，冬天真的来啦。❄️",
                        "吃一顿热气腾腾的早餐，是对冬天早晨最大的尊重。",
                        "呼一口气都是白色的，这才是冬天的感觉。"
                    ],
                    afternoon: [
                        "下午好，晒晒冬日的太阳，整个人都暖洋洋的。",
                        "泡个热水脚，是对冬天下午最好的尊重。",
                        "天气这么冷，不如…吃顿火锅？🍲",
                        "午安，愿这个冬天，有人与你立黄昏，有人问你粥可温。",
                        "冬日的午后短暂又珍贵，多晒晒太阳吧。",
                        "一杯热可可，一份好心情，送给这个下午的你。☕️",
                        "外面天寒地冻，还是待在室内最舒服了。",
                        "离天黑又近了一步，珍惜白天的时光。"
                    ],
                    evening: [
                        "晚上好，窗外天寒地冻，屋内温暖如春。",
                        "冬天最适合窝在沙发里，看一部温暖的电影。🎬",
                        "雪落下的声音，是冬夜的交响曲。",
                        "晚来天欲雪，能饮一杯无？",
                        "晚上好，回家路上注意保暖呀。",
                        "冬夜的灯火，看起来总是格外温暖。",
                        "忙了一天，窝在沙发里就是最大的幸福。",
                        "天冷了，今晚吃点热乎的吧！"
                    ],
                    night: [
                        "夜深了，钻进温暖的被窝，和世界说晚安。🛌",
                        "晚安，愿你一夜无梦，安睡到天亮。",
                        "冬天，是适合早睡的季节，晚安。",
                        "请查收你的冬日限定好梦。🌙",
                        "晚安，让温暖的被窝治愈你的一切。",
                        "听着窗外的风声，安稳地睡吧。",
                        "别熬夜了，对得起这么冷的天吗？快去睡觉！",
                        "晚安，愿你梦里阳光普照，春暖花开。"
                    ]
                },
                default: [ // 默认/备用问候语
                    "你好呀，今天过得怎么样？",
                    "愿你眼里的星星，永远闪亮。",
                    "无论天气如何，记得带上自己的阳光。",
                    "希望你今天也能开心！",
                    "嘿，陌生人，祝你今天开心。",
                    "生活或许不易，但请别忘了微笑。😊",
                    "每一天都是一份独一无二的礼物。",
                    "偷偷告诉你，你很棒！",
                    "愿你所到之处，皆为热土；愿你所遇之人，皆为良善。"
                ]
            };

            // 判断季节
            let season = 'default';
            if (month >= 3 && month <= 5) {
                season = 'spring';
            } else if (month >= 6 && month <= 8) {
                season = 'summer';
            } else if (month >= 9 && month <= 11) {
                season = 'autumn';
            } else { // 12, 1, 2月
                season = 'winter';
            }

            // 判断时间段
            let timeOfDay = 'night';
            if (hour >= 5 && hour < 12) {
                timeOfDay = 'morning';
            } else if (hour >= 12 && hour < 18) {
                timeOfDay = 'afternoon';
            } else if (hour >= 18 && hour < 22) {
                timeOfDay = 'evening';
            }

            // 获取对应的问候语列表
            const availableGreetings = greetings[season][timeOfDay] || greetings.default;
            
            // 随机选择一条问候语并显示
            const randomGreeting = availableGreetings[Math.floor(Math.random() * availableGreetings.length)];
            greetingEl.textContent = randomGreeting;
        }

        // --- [REFACTORED] 日历计算核心函数 ---
        function lYearDays(y) { let i, sum = 348; for (i = 0x8000; i > 0x8; i >>= 1) sum += (lunarInfo[y - 1900] & i) ? 1 : 0; return (sum + leapDays(y)); }
        function leapDays(y) { if (leapMonth(y)) return ((lunarInfo[y - 1900] & 0x10000) ? 30 : 29); else return (0); }
        function leapMonth(y) { return (lunarInfo[y - 1900] & 0xf); }
        function monthDays(y, m) { return ((lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29); }
        function Dianaday(objDate) { var i, leap = 0, temp = 0; var baseDate = new Date(1900, 0, 31); var offset = (objDate - baseDate) / 86400000; this.dayCyl = offset + 40; this.monCyl = 14; for (i = 1900; i < 2050 && offset > 0; i++) { temp = lYearDays(i); offset -= temp; this.monCyl += 12; } if (offset < 0) { offset += temp; i--; this.monCyl -= 12; } this.year = i; this.yearCyl = i - 1864; leap = leapMonth(i); this.isLeap = false; for (i = 1; i < 13 && offset > 0; i++) { if (leap > 0 && i == (leap + 1) && this.isLeap == false) { --i; this.isLeap = true; temp = leapDays(this.year); } else { temp = monthDays(this.year, i); } if (this.isLeap == true && i == (leap + 1)) this.isLeap = false; offset -= temp; if (this.isLeap == false) this.monCyl++; } if (offset == 0 && leap > 0 && i == leap + 1) if (this.isLeap) { this.isLeap = false; } else { this.isLeap = true; --i; --this.monCyl; } if (offset < 0) { offset += temp; --i; --this.monCyl; } this.month = i; this.day = offset + 1; }
        
        function getAllHolidaysForYear(year) {
            let allEvents = [];
            
            function getSolarDateForLunar(targetYear, lunarMonth, lunarDay) {
                for (let i = 0; i < 366; i++) {
                    const checkDate = new Date(targetYear, 0, 1);
                    checkDate.setDate(checkDate.getDate() + i);
                    if (checkDate.getFullYear() !== targetYear) break;
                    const lunarDateInfo = new Dianaday(checkDate);
                    if (lunarDateInfo.month === lunarMonth && lunarDateInfo.day === lunarDay && !lunarDateInfo.isLeap) return checkDate;
                }
                return null;
            }

            // 公历节日
            sFtv.forEach(holiday => {
                const month = parseInt(holiday.substr(0, 2));
                const day = parseInt(holiday.substr(2, 2));
                const name = holiday.substr(5);
                allEvents.push({ name, date: new Date(year, month - 1, day) });
            });

            // 农历节日
            const allLunarHolidays = [...lFtv, "1230 除夕"];
            allLunarHolidays.forEach(holiday => {
                const name = holiday.substr(5);
                if (name === '除夕') {
                    const cnyDate = getSolarDateForLunar(year + 1, 1, 1); // Check next year's CNY to find this year's eve
                    if (cnyDate) {
                        let eveDate = new Date(cnyDate);
                        eveDate.setDate(eveDate.getDate() - 1);
                        if (eveDate.getFullYear() === year) {
                           allEvents.push({ name: '除夕', date: eveDate });
                        }
                    }
                } else {
                    const lMonth = parseInt(holiday.substr(0, 2));
                    const lDay = parseInt(holiday.substr(2, 2));
                    const holidayDate = getSolarDateForLunar(year, lMonth, lDay);
                    if (holidayDate) allEvents.push({ name, date: holidayDate });
                }
            });

            // 节气
            solarTerm.forEach((termName, i) => {
                const offDate = new Date((31556925974.7 * (year - 1900) + sTermInfo[i] * 60000) + Date.UTC(1900, 0, 6, 2, 5));
                allEvents.push({ name: termName, date: new Date(offDate.getUTCFullYear(), offDate.getUTCMonth(), offDate.getUTCDate()) });
            });

            // 周日计算的节日
            const mayFirst = new Date(year, 4, 1);
            const mothersDay = new Date(year, 4, 1 + (7 - mayFirst.getDay() + 7) % 7 + 7);
            allEvents.push({ name: '母亲节', date: mothersDay });

            const juneFirst = new Date(year, 5, 1);
            const fathersDay = new Date(year, 5, 1 + (7 - juneFirst.getDay() + 7) % 7 + 14);
            allEvents.push({ name: '父亲节', date: fathersDay });

            const novFirst = new Date(year, 10, 1);
            const thanksgivingDay = new Date(year, 10, 1 + (4 - novFirst.getDay() + 7) % 7 + 21);
            allEvents.push({ name: '感恩节', date: thanksgivingDay });
            
            // 排序并返回
            return allEvents.sort((a, b) => a.date - b.date);
        }

        // --- 主倒计时卡片更新 ---
        function updateCountdown() {
            const countdownDisplay = document.getElementById('countdown-display');
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            
            const currentYearEvents = getAllHolidaysForYear(now.getFullYear());
            const nextYearEvents = getAllHolidaysForYear(now.getFullYear() + 1);

            const upcomingEvents = [...currentYearEvents, ...nextYearEvents].filter(event => event.date >= today);

            if (upcomingEvents.length > 0) {
                const nextHoliday = upcomingEvents[0];
                const diffTime = nextHoliday.date - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays === 0) {
                    countdownDisplay.innerHTML = `<span class="text-lg text-white">今天</span><br><strong class="text-3xl font-bold text-sky-300">${nextHoliday.name}</strong>`;
                } else {
                    countdownDisplay.innerHTML = `<span class="text-white">距离</span><br><strong class="text-xl text-white">${nextHoliday.name}</strong><br><span class="font-bold text-5xl align-baseline">${diffDays}</span><span class="text-lg align-baseline ml-1">天</span>`;
                }
            } else {
                countdownDisplay.textContent = '所有节日都已计算完毕！';
            }
        }

        // --- 节日列表视图更新 ---
        function displayHolidayList(year) {
            const container = document.getElementById('holiday-list-container');
            const yearDisplay = document.getElementById('holiday-list-year');
            yearDisplay.textContent = year;
            
            const allHolidays = getAllHolidaysForYear(year);
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            const firstUpcoming = [...getAllHolidaysForYear(now.getFullYear()), ...getAllHolidaysForYear(now.getFullYear() + 1)]
                .filter(e => e.date >= today)[0];

            const holidaysByMonth = allHolidays.reduce((acc, holiday) => {
                const month = holiday.date.getMonth();
                if (!acc[month]) acc[month] = [];
                acc[month].push(holiday);
                return acc;
            }, {});

            let html = '';
            for (let month = 0; month < 12; month++) {
                if (holidaysByMonth[month]) {
                    html += `<div class="mb-3"><h3 class="text-lg font-semibold text-white/80 border-b border-white/10 pb-1 mb-2">${month + 1}月</h3>`;
                    holidaysByMonth[month].forEach(holiday => {
                        const diffTime = holiday.date - today;
                        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                        let statusText = '';
                        if (holiday.date.getFullYear() < now.getFullYear() || (holiday.date.getFullYear() === now.getFullYear() && diffDays < -1)) {
                            statusText = `<span class="text-gray-500">已过</span>`;
                        } else if (diffDays === -1) {
                            statusText = `<span class="text-yellow-400">昨天</span>`;
                        } else if (diffDays === 0) {
                            statusText = `<span class="text-green-400 font-bold">今天</span>`;
                        } else {
                            statusText = `<span class="text-sky-300">${diffDays + 1} 天</span>`;
                        }
                        
                        const isHighlighted = firstUpcoming && firstUpcoming.name === holiday.name && firstUpcoming.date.getTime() === holiday.date.getTime();
                        const highlightClass = isHighlighted ? 'highlight-holiday' : '';

                        html += `
                            <div class="flex justify-between items-center p-2 rounded-lg ${highlightClass}">
                                <div>
                                    <span class="text-white">${holiday.name}</span>
                                    <span class="text-xs text-gray-400 ml-2">${String(holiday.date.getMonth() + 1).padStart(2, '0')}-${String(holiday.date.getDate()).padStart(2, '0')}</span>
                                </div>
                                ${statusText}
                            </div>
                        `;
                    });
                    html += `</div>`;
                }
            }
            container.innerHTML = html;
        }

        // --- Hitokoto 一言 功能 ---
        let isUpdatingQuote = false;
        async function fetchHitokoto() {
            if (isUpdatingQuote) return;
            isUpdatingQuote = true;
            const hitokotoText = document.getElementById('hitokoto-text');
            const hitokotoFrom = document.getElementById('hitokoto-from');
            hitokotoText.classList.add('opacity-0');
            hitokotoFrom.classList.add('opacity-0');
            try {
                await new Promise(resolve => setTimeout(resolve, 500));
                const response = await fetch('https://v1.hitokoto.cn/?encode=json');
                if (!response.ok) throw new Error('Network response was not ok.');
                const data = await response.json();
                hitokotoText.textContent = data.hitokoto;
                hitokotoFrom.textContent = `— 「${data.from || '未知来源'}」`;
            } catch (error) {
                console.error("获取一言失败:", error);
                hitokotoText.textContent = '获取一言失败，请稍后再试。';
                hitokotoFrom.textContent = '';
            } finally {
                hitokotoText.classList.remove('opacity-0');
                hitokotoFrom.classList.remove('opacity-0');
                setTimeout(() => { isUpdatingQuote = false; }, 600);
            }
        }

        // --- 时光胶囊功能 ---
        function updateTimeCapsule() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const dayOfMonth = now.getDate();
            const dayOfWeek = now.getDay(); // 0 for Sunday, 1 for Monday, etc.
            const hour = now.getHours();

            // 1. 今日进度
            const dayPassed = hour;
            const dayLeft = 24 - dayPassed;
            const dayPercent = (dayPassed / 24) * 100;
            document.getElementById('day-passed').textContent = dayPassed;
            document.getElementById('day-left').textContent = dayLeft;
            document.getElementById('day-percent').textContent = `${dayPercent.toFixed(1)}%`;
            document.getElementById('day-progress').style.width = `${dayPercent}%`;

            // 2. 本周进度 (周一为第一天)
            const weekPassed = dayOfWeek === 0 ? 7 : dayOfWeek;
            const weekLeft = 7 - weekPassed;
            const weekPercent = (weekPassed / 7) * 100;
            document.getElementById('week-passed').textContent = weekPassed;
            document.getElementById('week-left').textContent = weekLeft;
            document.getElementById('week-percent').textContent = `${weekPercent.toFixed(1)}%`;
            document.getElementById('week-progress').style.width = `${weekPercent}%`;

            // 3. 本月进度
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const monthPassed = dayOfMonth;
            const monthLeft = daysInMonth - monthPassed;
            const monthPercent = (monthPassed / daysInMonth) * 100;
            document.getElementById('month-passed').textContent = monthPassed;
            document.getElementById('month-left').textContent = monthLeft;
            document.getElementById('month-percent').textContent = `${monthPercent.toFixed(1)}%`;
            document.getElementById('month-progress').style.width = `${monthPercent}%`;

            // 4. 今年进度
            const startOfYear = new Date(year, 0, 1);
            const endOfYear = new Date(year, 11, 31);
            const totalDaysInYear = (endOfYear - startOfYear) / (1000 * 60 * 60 * 24) + 1;
            const yearPassed = Math.ceil((now - startOfYear) / (1000 * 60 * 60 * 24));
            const yearLeft = totalDaysInYear - yearPassed;
            const yearPercent = (yearPassed / totalDaysInYear) * 100;
            document.getElementById('year-passed').textContent = yearPassed;
            document.getElementById('year-left').textContent = yearLeft;
            document.getElementById('year-percent').textContent = `${yearPercent.toFixed(1)}%`;
            document.getElementById('year-progress').style.width = `${yearPercent}%`;
        }
        
        // --- 网站运行时间 ---
        function updateSiteRuntime() {
             const startTime = new Date('2025-07-30T18:30:00');
            const now = new Date();
            const diff = now - startTime;

            const displayElement = document.getElementById('site-runtime-display');
            if (!displayElement) return;

            if (diff < 0) {
                displayElement.textContent = '小破站尚未启航...';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            displayElement.innerHTML = `小破站已经在风雨中度过了 <span class="text-white font-semibold runtime-number">${days}</span> 天 <span class="text-white font-semibold runtime-number">${hours}</span> 小时 <span class="text-white font-semibold runtime-number">${minutes}</span> 分 <span class="text-white font-semibold runtime-number">${seconds}</span> 秒`;
        }

        // --- 交互事件监听 ---
        function setupEventListeners() {
            const animateRightColumnIn = () => {
                const elementsToAnimate = rightColumn.querySelectorAll(':scope > div');
                elementsToAnimate.forEach(el => {
                    el.classList.remove('bounce-in');
                    void el.offsetWidth;
                    el.classList.add('bounce-in');
                });
            };

            // 切换到时光胶囊
            profileCard.addEventListener('click', () => {
                const rightColumnHeight = rightColumn.offsetHeight;
                timeCapsuleCard.style.minHeight = `${rightColumnHeight}px`;
                rightColumn.classList.add('hidden');
                holidayListCard.classList.add('hidden');
                timeCapsuleCard.classList.remove('hidden');
                timeCapsuleCard.classList.add('bounce-in');
                updateTimeCapsule();
            });

            // 关闭时光胶囊
            document.getElementById('close-time-capsule').addEventListener('click', (e) => {
                e.stopPropagation();
                timeCapsuleCard.classList.add('hidden');
                rightColumn.classList.remove('hidden');
                animateRightColumnIn();
            });

            // 切换到节日列表
            countdownCard.addEventListener('click', () => {
                const rightColumnHeight = rightColumn.offsetHeight;
                holidayListCard.style.minHeight = `${rightColumnHeight}px`;
                rightColumn.classList.add('hidden');
                timeCapsuleCard.classList.add('hidden');
                holidayListCard.classList.remove('hidden');
                holidayListCard.classList.add('bounce-in');
                holidayListDisplayedYear = new Date().getFullYear();
                displayHolidayList(holidayListDisplayedYear);
                new SimpleBar(document.getElementById('holiday-list-container-wrapper'));
            });

            // 关闭节日列表
            document.getElementById('close-holiday-list').addEventListener('click', (e) => {
                e.stopPropagation();
                holidayListCard.classList.add('hidden');
                rightColumn.classList.remove('hidden');
                animateRightColumnIn();
            });

            // 节日列表年份切换
            document.getElementById('prev-year').addEventListener('click', () => {
                holidayListDisplayedYear--;
                displayHolidayList(holidayListDisplayedYear);
            });
            document.getElementById('next-year').addEventListener('click', () => {
                holidayListDisplayedYear++;
                displayHolidayList(holidayListDisplayedYear);
            });

            // 点击一言卡片刷新
            document.getElementById('hitokoto-card').addEventListener('click', fetchHitokoto);
        }

        // --- 页面加载时执行的函数 ---
        document.addEventListener('DOMContentLoaded', () => {
            setRandomBackground();
            updateTime();
            updateGreeting();
            updateCountdown();
            fetchHitokoto();
            setupEventListeners();
            updateSiteRuntime();
            updateTimeCapsule();
            
            setInterval(updateTime, 1000);
            setInterval(updateSiteRuntime, 1000);
            setInterval(updateGreeting, 1800000); 
            setInterval(updateCountdown, 3600000); 
            setInterval(updateTimeCapsule, 60000);
        });
    </script>
</body>
</html>
