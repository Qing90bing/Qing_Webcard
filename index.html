<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qing90bingçš„ä¸»é¡µ</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.css" />
    <script src="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* è‡ªå®šä¹‰æ ·å¼ */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* é˜²æ­¢å‡ºç°åŒæ»šåŠ¨æ¡ */
        }
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #0d1a26;
            color: #e0e0e0;
        }

        /* èƒŒæ™¯å›¾ç‰‡å®¹å™¨ */
        #bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #time-display, .runtime-number {
            font-variant-numeric: tabular-nums;
        }
        
        #time-display {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(137, 207, 240, 0.5);
        }

        .simplebar-scrollbar:before {
            background-color: rgba(137, 207, 240, 0.6);
            border-radius: 4px;
        }
        .simplebar-track.simplebar-vertical {
            width: 8px;
        }

        /* [FIXED] Qå¼¹åŠ¨ç”» - ç§»é™¤äº†opacityå±æ€§ä»¥ä¿®å¤èƒŒæ™¯é€æ˜é—®é¢˜ */
        @keyframes bounce-in {
            0% { transform: scale(0.95); }
            60% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .bounce-in {
            animation: bounce-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-bar {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-bar-inner {
            background-color: #38bdf8; /* sky-500 */
            border-radius: 9999px;
            transition: width 0.5s ease-out;
        }
        
        /* é«˜äº®æœ€è¿‘çš„èŠ‚æ—¥ */
        .highlight-holiday {
            background-color: rgba(56, 189, 248, 0.15);
            border-left: 3px solid #38bdf8;
        }
    </style>
</head>
<body>
    <div id="bg-container"></div>
    <div data-simplebar style="height: 100vh;">
        <div class="flex items-center justify-center min-h-screen px-8 sm:px-16 lg:px-24">
            <main class="grid grid-cols-1 lg:grid-cols-4 gap-5 w-full max-w-6xl">

                <div class="lg:col-span-1 space-y-5 flex flex-col">
                    <div class="glass-card flex items-center justify-center p-5 gap-4">
                        <h1 class="text-3xl font-bold text-white">Qing90bing</h1>
                    </div>

                    <div id="countdown-card" class="glass-card p-5 cursor-pointer">
                        <h2 class="text-xl font-semibold text-white mb-3 text-center">æ—¥å†å€’è®¡æ—¶</h2>
                        <div id="countdown-display" class="text-center text-lg text-sky-300 leading-relaxed">æ­£åœ¨è®¡ç®—...</div>
                    </div>
                    
                    <div id="profile-card" class="glass-card p-5 flex flex-col justify-between flex-grow cursor-pointer">
                        <div class="relative px-4 py-2">
                            <span class="absolute top-0 left-0 text-6xl text-white/20 font-serif -translate-y-4 -translate-x-2 select-none">â€œ</span>
                            <p class="text-lg">Hello, World!</p>
                            <p class="text-gray-300 mt-1">ä¸€ä¸ªå»ºç«‹äº21ä¸–çºªçš„å°ç«™ï¼Œå­˜æ´»äºäº’è”ç½‘çš„è¾¹ç¼˜</p>
                            <span class="absolute bottom-0 right-0 text-6xl text-white/20 font-serif translate-y-6 translate-x-2 select-none">â€</span>
                        </div>
                        <div class="mt-8">
                            <p class="text-sm text-gray-400 mb-4">ä¸æˆ‘è”ç³»:</p>
                            <div class="flex items-center gap-5">
                                <a href="https://github.com/Qing90bing" target="_blank" class="text-gray-300 hover:text-white transition-colors" title="GitHub">
                                    <svg class="w-7 h-7" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                                </a>
                                <a href="mailto:1879495519@qq.com" target="_blank" class="text-gray-300 hover:text-white transition-colors" title="Email">
                                    <svg class="w-7 h-7" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Email</title><path fill="currentColor" d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"/></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="right-column" class="lg:col-span-3 space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div class="glass-card p-5 flex flex-col justify-center items-center">
                            <div id="date-display" class="text-lg text-gray-300"></div>
                            <div id="time-display" class="text-6xl text-white my-1"></div>
                            <div id="greeting" class="text-sm text-gray-400"></div>
                        </div>
                        <div id="hitokoto-card" class="glass-card p-5 flex flex-col justify-center cursor-pointer min-h-[120px] md:min-h-full">
                            <p id="hitokoto-text" class="text-center text-gray-200 transition-opacity duration-500 ease-in-out">æ­£åœ¨åŠ è½½ä¸€è¨€...</p>
                            <p id="hitokoto-from" class="text-right text-sm text-gray-400 mt-2 transition-opacity duration-500 ease-in-out"></p>
                        </div>
                    </div>
                    
                    <div class="glass-card p-5">
                        <h2 class="text-xl font-semibold text-white mb-4">
                           <svg class="inline-block w-6 h-6 mr-2 -mt-1" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                           GitHub è´¡çŒ®å›¾
                        </h2>
                        <a href="https://github.com/Qing90bing" target="_blank">
                            <img src="https://ghchart.rshah.org/Qing90bing?theme=dark" alt="Qing90bing's GitHub Contribution Graph" class="w-full rounded-md p-2 bg-gray-800/50"/>
                        </a>

                        <h2 class="text-xl font-semibold text-white mb-4 mt-6">
                            <svg class="inline-block w-6 h-6 mr-2 -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>
                            ç½‘ç«™åˆ—è¡¨
                        </h2>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <a href="https://qing90bing.github.io/QingNoteblog/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <span class="font-medium">åšå®¢</span>
                            </a>
                            <a href="https://qing90bing.github.io/Qing_Music/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"></path></svg>
                                <span class="font-medium">éŸ³ä¹</span>
                            </a>
                            <a href="https://qing90bing.github.io/Qing_Start/" target="_blank" class="glass-card p-4 flex flex-col items-center justify-center text-center hover:scale-105 transform-gpu">
                                <svg class="w-8 h-8 mb-2 text-sky-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                                <span class="font-medium">èµ·å§‹é¡µ</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Holiday List Card -->
                <div id="holiday-list-card" class="lg:col-span-3 glass-card p-5 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-white">èŠ‚æ—¥å€’æ•°åˆ—è¡¨</h2>
                        <div class="flex items-center gap-4 text-lg">
                            <button id="prev-year" title="ä¸Šä¸€å¹´" class="px-2 rounded-md text-gray-400 hover:text-white hover:bg-white/10 transition-colors">&lt;</button>
                            <span id="holiday-list-year" class="font-bold text-white w-16 text-center">2025</span>
                            <button id="next-year" title="ä¸‹ä¸€å¹´" class="px-2 rounded-md text-gray-400 hover:text-white hover:bg-white/10 transition-colors">&gt;</button>
                        </div>
                        <button id="close-holiday-list" title="å…³é—­" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div id="holiday-list-container-wrapper" class="overflow-y-auto" style="max-height: 65vh;">
                       <div id="holiday-list-container" class="space-y-4">
                           <!-- Holiday list will be dynamically inserted here -->
                       </div>
                    </div>
                </div>

                <!-- Time Capsule Card -->
                <div id="time-capsule-card" class="lg:col-span-3 glass-card p-5 hidden flex flex-col">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold text-white">æ—¶å…‰èƒ¶å›Š</h2>
                        <button id="close-time-capsule" title="å…³é—­" class="text-gray-400 hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="space-y-5">
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>ä»Šæ—¥å·²è¿‡ <span id="day-passed">0</span> å°æ—¶</span>
                                <span>å‰©ä½™ <span id="day-left">24</span> å°æ—¶</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="day-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="day-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>æœ¬å‘¨å·²è¿‡ <span id="week-passed">0</span> å¤©</span>
                                <span>å‰©ä½™ <span id="week-left">7</span> å¤©</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="week-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="week-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>æœ¬æœˆå·²è¿‡ <span id="month-passed">0</span> å¤©</span>
                                <span>å‰©ä½™ <span id="month-left">30</span> å¤©</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="month-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="month-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm font-medium text-gray-300">
                                <span>ä»Šå¹´å·²è¿‡ <span id="year-passed">0</span> å¤©</span>
                                <span>å‰©ä½™ <span id="year-left">365</span> å¤©</span>
                            </div>
                            <div class="progress-bar h-5 flex items-center justify-center relative">
                                <div id="year-progress" class="progress-bar-inner absolute top-0 left-0 h-full" style="width: 0%;"></div>
                                <span id="year-percent" class="relative z-10 text-xs font-bold text-white">0%</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 text-center text-gray-300">
                        <p id="site-runtime-display">æ­£åœ¨è®¡ç®—...</p>
                    </div>
                </div>

            </main>
        </div>
    </div>
    
    <script>
        // --- åˆå§‹çŠ¶æ€å’Œå¸¸é‡ ---
        const lunarInfo = [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2, 0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977, 0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970, 0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950, 0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557, 0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5d0, 0x14573, 0x052d0, 0x0a9a8, 0x0e950, 0x06aa0, 0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0, 0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b5a0, 0x195a6, 0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570, 0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0, 0x0c960, 0xd954, 0x0d4a0, 0xda50, 0x07552, 0x056a0, 0xabb7, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, 0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, 0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0];
        const solarTerm = ["å°å¯’", "å¤§å¯’", "ç«‹æ˜¥", "é›¨æ°´", "æƒŠè›°", "æ˜¥åˆ†", "æ¸…æ˜", "è°·é›¨", "ç«‹å¤", "å°æ»¡", "èŠ’ç§", "å¤è‡³", "å°æš‘", "å¤§æš‘", "ç«‹ç§‹", "å¤„æš‘", "ç™½éœ²", "ç§‹åˆ†", "å¯’éœ²", "éœœé™", "ç«‹å†¬", "å°é›ª", "å¤§é›ª", "å†¬è‡³"];
        const sTermInfo = [0, 21208, 42467, 63836, 85337, 107014, 128867, 150921, 173149, 195551, 218072, 240693, 263343, 285989, 308563, 331033, 353350, 375494, 397447, 419210, 440795, 462224, 483532, 504758];
        const sFtv = ["0101 å…ƒæ—¦", "0214 æƒ…äººèŠ‚", "0308 å¦‡å¥³èŠ‚", "0312 æ¤æ ‘èŠ‚", "0401 æ„šäººèŠ‚", "0501 åŠ³åŠ¨èŠ‚", "0504 é’å¹´èŠ‚", "0601 å„¿ç«¥èŠ‚", "0701 å»ºå…šèŠ‚", "0801 å»ºå†›èŠ‚", "0815 æ—¥æœ¬æŠ•é™æ—¥", "0903 æŠ—æˆ˜èƒœåˆ©çºªå¿µæ—¥", "0910 æ•™å¸ˆèŠ‚", "1001 å›½åº†èŠ‚", "1213 å›½å®¶å…¬ç¥­æ—¥", "1225 åœ£è¯èŠ‚"];
        const lFtv = ["0101 æ˜¥èŠ‚", "0115 å…ƒå®µèŠ‚", "0505 ç«¯åˆèŠ‚", "0707 ä¸ƒå¤•", "0815 ä¸­ç§‹èŠ‚", "0909 é‡é˜³èŠ‚", "1208 è…Šå…«èŠ‚"];
        let holidayListDisplayedYear = new Date().getFullYear();

        // --- DOM å…ƒç´ è·å– ---
        const bgContainer = document.getElementById('bg-container');
        const countdownCard = document.getElementById('countdown-card');
        const profileCard = document.getElementById('profile-card');
        const rightColumn = document.getElementById('right-column');
        const timeCapsuleCard = document.getElementById('time-capsule-card');
        const holidayListCard = document.getElementById('holiday-list-card');

        // --- è®¾ç½®éšæœºèƒŒæ™¯å›¾ç‰‡ ---
        function setRandomBackground() {
            const myImages = [
                'https://s21.ax1x.com/2025/08/10/pVdEmM6.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEnsK.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEuqO.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEQde.jpg',
                'https://s21.ax1x.com/2025/08/10/pVdEMZD.jpg'
            ];
            const randomImageUrl = myImages[Math.floor(Math.random() * myImages.length)];
            const img = new Image();
            img.src = randomImageUrl;
            img.onload = () => {
                bgContainer.style.backgroundImage = `url('${randomImageUrl}')`;
                bgContainer.style.opacity = 1;
            };
        }
        
        // --- åŠ¨æ€æ—¶é’ŸåŠŸèƒ½ ---
        function updateTime() {
            const timeDisplay = document.getElementById('time-display');
            const dateDisplay = document.getElementById('date-display');
            const now = new Date();
            timeDisplay.textContent = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
            const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
            dateDisplay.textContent = `${now.getFullYear()}å¹´${String(now.getMonth() + 1).padStart(2, '0')}æœˆ${String(now.getDate()).padStart(2, '0')}æ—¥ ${weekdays[now.getDay()]}`;
        }

        // --- é—®å€™è¯­åŠŸèƒ½ ---
        function updateGreeting() {
            const greetingEl = document.getElementById('greeting');
            const now = new Date();
            const hour = now.getHours();
            const month = now.getMonth() + 1; // getMonth() è¿”å› 0-11, +1 å˜ä¸º 1-12

            // å®šä¹‰é—®å€™è¯­åº“
            const greetings = {
                spring: { // æ˜¥å­£ (3-5æœˆ)
                    morning: [
                        "æ—©ä¸Šå¥½ï¼Œæ˜¥æ„ç›ç„¶ï¼Œæ„¿ä½ çš„ä¸€å¤©å¦‚è¯—å¦‚ç”»ã€‚ğŸŒ¿",
                        "æ¸…æ™¨çš„éœ²æ°´ï¼Œä¼´ç€èŠ±é¦™ï¼Œé“ä¸€å£°æ—©å®‰ã€‚ğŸŒ¸",
                        "æ˜¥æ—¥é»æ˜ï¼Œä¸‡ç‰©å¤è‹ï¼Œä»Šå¤©ä¹Ÿè¦æ´»åŠ›æ»¡æ»¡ï¼",
                        "æ—©å®‰ï¼Œæ„¿æ˜¥é£ä¸ºä½ å¹æ¥ä¸€å¤©çš„å¥½è¿ã€‚ğŸƒ",
                        "å¬ï¼Œçª—å¤–æ˜¯ä¸æ˜¯æœ‰é¸Ÿå„¿åœ¨æ­Œå”±ï¼Ÿæ—©å®‰ï¼ğŸ¦",
                        "æ–°çš„ä¸€å¤©ï¼Œä»ä¸€ä¸ªæ¸…æ–°çš„æ˜¥æ—¥æ—©æ™¨å¼€å§‹ã€‚",
                        "ä¸€å¹´ä¹‹è®¡åœ¨äºæ˜¥ï¼Œä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨ï¼ŒåŠ æ²¹ï¼",
                        "æ‹‰å¼€çª—å¸˜ï¼Œè®©ç¬¬ä¸€ç¼•æ˜¥å…‰æ‹¥æŠ±ä½ ã€‚â˜€ï¸"
                    ],
                    afternoon: [
                        "ä¸‹åˆå¥½ï¼Œæ˜¥æ—¥æš–é˜³ï¼Œé€‚åˆå°æ†©ç‰‡åˆ»ã€‚â˜€ï¸",
                        "åˆåæ—¶å…‰ï¼Œæ³¡æ¯èŠ±èŒ¶ï¼Œäº«å—æ˜¥æ—¥çš„æ‚ é—²å§ã€‚ğŸµ",
                        "æ„¿ä½ å¿ƒæƒ…å¦‚æ˜¥æ—¥åˆåçš„é˜³å…‰ï¼Œæ˜åªšä¸å¿§ä¼¤ã€‚",
                        "æ˜¥å¤©åˆ°ï¼Œåˆ«æ˜¥å›°ï¼Œèµ·æ¥æ´»åŠ¨ä¸€ä¸‹ç­‹éª¨å§ï¼",
                        "å¤©æ°”è¿™ä¹ˆå¥½ï¼Œä¸å»å…¬å›­æ•£æ•£æ­¥å—ï¼Ÿ",
                        "åˆåçš„é˜³å…‰ï¼Œæš–å¾—è®©äººæƒ³æ‰“çŒç¡ã€‚ğŸ˜´",
                        "æ³¡ä¸€å£¶é¾™äº•ï¼Œé™å“æ˜¥æ—¥çš„åˆåæ—¶å…‰ã€‚",
                        "æ˜¥é›·é˜µé˜µï¼Œè¯´ä¸å®šä¼šæœ‰ä¸€åœºæ˜¥é›¨ï¼Œè®°å¾—å¸¦ä¼ã€‚"
                    ],
                    evening: [
                        "æ™šä¸Šå¥½ï¼Œæ˜¥é£æ‹‚é¢ï¼Œä¸€å¤©çš„ç–²æƒ«éƒ½æ¶ˆæ•£äº†ã€‚ğŸ‘",
                        "å¤œå¹•é™ä¸´ï¼Œé™äº«æ˜¥å¤œçš„æ¸©æŸ”ä¸å®é™ã€‚",
                        "æ˜¥å¤œçš„æ˜Ÿç©ºæ ¼å¤–æ˜æœ—ï¼Œç¥ä½ æ™šå®‰å¥½æ¢¦ã€‚âœ¨",
                        "åœ¨æ¸©æŸ”çš„æ˜¥å¤œé‡Œï¼Œå’Œä¸–ç•Œé“ä¸€å¥æ™šå®‰ã€‚",
                        "æ˜¥å¤©çš„æ™šéœæ€»æ˜¯æ ¼å¤–æ¸©æŸ”ï¼Œæ™šä¸Šå¥½ã€‚",
                        "å¿™ç¢Œäº†ä¸€å¤©ï¼Œæ˜¯æ—¶å€™äº«å—ä¸€é¡¿ç¾å‘³çš„æ™šé¤äº†ã€‚ğŸ²",
                        "æ™šé£è½»è½»ï¼Œå¹æ¥é’è‰å’Œæ³¥åœŸçš„èŠ¬èŠ³ã€‚",
                        "ä»Šæ™šæœˆè‰²çœŸç¾ï¼Œé£ä¹Ÿæ¸©æŸ”ï¼Œç¥ä½ æ„‰å¿«ã€‚"
                    ],
                    night: [
                        "å¤œæ·±äº†ï¼Œæ˜¥å¤œå¾®å‡‰ï¼Œè®°å¾—ç›–å¥½è¢«å­ã€‚ğŸŒ™",
                        "æ™šå®‰ï¼Œæ„¿ä½ åœ¨æ¢¦é‡Œä¸æœ€ç¾çš„æ˜¥å¤©ç›¸é‡ã€‚",
                        "æ”¾ä¸‹æ‰‹æœºï¼Œé—­ä¸Šçœ¼ç›ï¼Œè†å¬æ˜¥è™«çš„é¸£å«ã€‚ğŸ˜´",
                        "å¤œé˜‘äººé™ï¼Œç¥ä½ å®‰çœ ï¼Œæ˜æ—¥åˆæ˜¯å´­æ–°çš„ä¸€å¤©ã€‚",
                        "æ˜¥å¤œå®é™ï¼Œå®œè¯»ä¸€æœ¬é—²ä¹¦ï¼Œå®‰ç„¶å…¥ç¡ã€‚",
                        "æŠŠä»Šå¤©ä»½çš„å¼€å¿ƒæ‰“åŒ…ï¼Œç¡ä¸ªå¥½è§‰å§ã€‚",
                        "æ™šå®‰ï¼Œæ„¿ä½ çš„æ¢¦é‡Œç¹èŠ±ä¼¼é”¦ã€‚ğŸŒ¸",
                        "å¤œäº†ï¼Œå…¨ä¸–ç•Œéƒ½ç¡äº†ï¼Œä½ ä¹Ÿè¦æ—©ç‚¹ä¼‘æ¯ã€‚"
                    ]
                },
                summer: { // å¤å­£ (6-8æœˆ)
                    morning: [
                        "æ—©ä¸Šå¥½ï¼Œå¤æ—¥æ¸…æ™¨ï¼Œé˜³å…‰æ­£å¥½ï¼Œå¾®é£ä¸ç‡¥ã€‚â˜€ï¸",
                        "æ—©å®‰ï¼ä»Šå¤©ä¹Ÿæ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ï¼Œåˆ«æ€•çƒ­ï¼",
                        "å¤æ—¥çš„æ¸…æ™¨ï¼Œæ˜¯è¥¿ç“œå‘³çš„ï¼Œæ˜¯å†°æ±½æ°´å‘³çš„ã€‚ğŸ‰",
                        "è‰é¸£å£°å£°ï¼Œå”¤é†’äº†å¤å¤©çš„æ—©æ™¨ï¼Œæ—©å®‰ï¼",
                        "æ—©å®‰ï¼ä»Šå¤©çš„å¤ªé˜³ä¹Ÿå¾ˆçƒ­æƒ…å‘¢ï¼",
                        "èµ¶åœ¨çƒ­æµªæ¥ä¸´å‰ï¼Œäº«å—æ¸…æ™¨çš„ç‰‡åˆ»å‡‰çˆ½å§ã€‚",
                        "åˆæ˜¯è¢«é˜³å…‰å«é†’çš„ä¸€å¤©ï¼Œä½ å¥½å‘€ï¼ğŸŒ",
                        "æ–°çš„ä¸€å¤©ï¼ŒåƒåŠ äº†å†°å—çš„æ±½æ°´ï¼Œå……æ»¡æ´»åŠ›ï¼"
                    ],
                    afternoon: [
                        "ä¸‹åˆå¥½ï¼Œå¤æ—¥ç‚ç‚ï¼Œè®°å¾—å¤šå–æ°´é˜²æš‘å“¦ã€‚ğŸ’§",
                        "åˆåå›°å€¦ï¼Œæ¥æ ¹å†°æ£ææç¥å§ï¼ğŸ¦",
                        "å¿ƒé™è‡ªç„¶å‡‰ï¼Œæ„¿ä½ æ‹¥æœ‰ä¸€ä¸ªæ¸…çˆ½çš„ä¸‹åˆã€‚",
                        "å¤æ—¥åˆåï¼Œå®œå¼€ç©ºè°ƒï¼Œå®œå¬éŸ³ä¹ï¼Œå®œæƒ³ä½ ã€‚ğŸ˜‰",
                        "çƒ­åˆ°èåŒ–çš„ä¸‹åˆï¼Œä½ è¿˜å¥½å—ï¼Ÿ",
                        "â€œå“ªå„¿å‡‰å¿«å“ªå„¿å¾…ç€å»â€ç»å¯¹æ˜¯å¤å¤©æœ€çœŸè¯šçš„ç¥ç¦ã€‚",
                        "å¯èƒ½ä¼šæœ‰é›·é˜µé›¨ï¼Œå‡ºé—¨è®°å¾—å¸¦ä¼å“¦ã€‚â›ˆï¸",
                        "è¿™ä¸ªé’Ÿç‚¹ï¼Œå”¯æœ‰ç©ºè°ƒå’Œè¥¿ç“œä¸å¯è¾œè´Ÿã€‚ğŸ‰"
                    ],
                    evening: [
                        "æ™šä¸Šå¥½ï¼Œå¤å¤œæ™šé£ï¼Œå¹æ•£ç™½å¤©çš„ç‡¥çƒ­ã€‚ğŸ",
                        "æç€ä¸€ç“¶æ±½æ°´ï¼Œååœ¨å°é˜¶ä¸Šï¼Œæ„Ÿå—å¤å¤©çš„æ™šé£ã€‚",
                        "å±äºå¤å¤©çš„å¤œæ™šï¼Œæ˜¯çƒ§çƒ¤ã€å°é¾™è™¾å’Œå†°å•¤é…’ã€‚ğŸ»",
                        "æ™šé£è½»è¸©ç€äº‘æœµï¼Œæœˆäº®åœ¨è´©å”®å¿«ä¹ï¼Œæ™šå®‰ï¼",
                        "æ™šé£å¹èµ°äº†çƒ­æ°”ï¼Œå¸¦æ¥äº†å¤å¤œçš„æƒ¬æ„ã€‚",
                        "åˆåˆ°äº†å¯ä»¥å»å¤œå¸‚é€›åƒé€›åƒçš„å­£èŠ‚ï¼",
                        "å°æ—¶å€™çš„å¤å¤œï¼Œæ˜¯è’²æ‰‡ã€å‡‰å¸­å’Œæ»¡å¤©ç¹æ˜Ÿã€‚âœ¨",
                        "æ™šä¸Šå¥½ï¼Œå»æ•£æ•£æ­¥å§ï¼Œè¯´ä¸å®šèƒ½çœ‹åˆ°è¤ç«è™«ã€‚"
                    ],
                    night: [
                        "å¤œæ·±äº†ï¼Œæ™šå®‰ï¼Œæ„¿ä½ çš„æ¢¦é‡Œæœ‰å‡‰çˆ½çš„å¤é£ã€‚ğŸŒŒ",
                        "ä»²å¤å¤œä¹‹æ¢¦ï¼Œæ„¿ä½ æ‹¥æŠ±æ•´ç‰‡æ˜Ÿç©ºã€‚âœ¨",
                        "å…³æ‰ç©ºè°ƒï¼Œå¯èƒ½ä¼šçƒ­ï¼›ä¸å…³ï¼Œå¯èƒ½ä¼šæ„Ÿå†’ã€‚ä½ çœ‹ç€åŠå§ï¼",
                        "æ™šå®‰ï¼Œæœˆäº®è­¦å¯Ÿå·²å°±ä½ï¼Œè¯·å®‰å¿ƒå…¥ç¡ã€‚ğŸ‘®",
                        "å˜˜ï¼Œé™ä¸‹å¿ƒæ¥ï¼Œå¬å¬çª—å¤–çš„è™«é¸£ã€‚",
                        "æ™šå®‰ï¼Œç©ºè°ƒè°ƒåˆ°26åº¦åˆšåˆšå¥½å“¦ã€‚ğŸ˜‰",
                        "åˆ«ç†¬å¤œäº†ï¼Œä½ çš„çš®è‚¤å’Œå¤´å‘éƒ½éœ€è¦ä¼‘æ¯ã€‚",
                        "ç¥ä½ åšä¸ªå‡‰çˆ½çš„æ¢¦ï¼Œæ¢¦é‡Œæ²¡æœ‰èšŠå­ã€‚ğŸ¦Ÿ"
                    ]
                },
                autumn: { // ç§‹å­£ (9-11æœˆ)
                    morning: [
                        "æ—©ä¸Šå¥½ï¼Œç§‹é«˜æ°”çˆ½ï¼Œå¤©æœ—æ°”æ¸…ï¼Œåˆæ˜¯ç¾å¥½çš„ä¸€å¤©ã€‚ğŸ",
                        "æ—©å®‰ï¼Œç©ºæ°”ä¸­æœ‰äº†ç§‹å¤©çš„å‘³é“ï¼Œæ·±å‘¼å¸ä¸€ä¸‹å§ã€‚",
                        "ç§‹æ—¥çš„æ™¨å…‰ï¼Œæ¸©æŸ”åœ°æ´’åœ¨æ¯ä¸€ç‰‡è½å¶ä¸Šï¼Œæ—©å®‰ã€‚",
                        "å¤©å‡‰äº†ï¼Œè®°å¾—å¤šç©¿ä»¶è¡£æœï¼Œåˆ«æ„Ÿå†’äº†å“¦ã€‚ğŸ§¥",
                        "ç§‹æ—¥çš„å¤©ç©ºï¼Œè“å¾—åƒä¸€å—ç”»å¸ƒï¼Œæ—©å®‰ã€‚",
                        "æ—©æ™¨çš„ç©ºæ°”å¾®å‡‰ï¼Œè®°å¾—æ·»ä¸€ä»¶è–„å¤–å¥—ã€‚",
                        "ç§‹å¤©ï¼Œæ˜¯ä¸€ä¸ªè®©ä¸€åˆ‡éƒ½æ²‰é™ä¸‹æ¥çš„å­£èŠ‚ï¼Œæ—©ã€‚",
                        "åˆæ˜¯è¢«æ¢¦æƒ³å«é†’çš„ä¸€å¤©ï¼ŒåŠ æ²¹ï¼Œæ‰“å·¥äººï¼"
                    ],
                    afternoon: [
                        "ä¸‹åˆå¥½ï¼Œç§‹æ—¥çš„åˆåï¼Œé˜³å…‰æ¸©æš–å¾—åˆšåˆšå¥½ã€‚â˜•ï¸",
                        "æ§ä¸€æ¯çƒ­èŒ¶ï¼Œè¯»ä¸€æœ¬å¥½ä¹¦ï¼Œäº«å—ç§‹æ—¥çš„é™è°§ã€‚",
                        "ç§‹å¤©æ˜¯æ”¶è·çš„å­£èŠ‚ï¼Œæ„¿ä½ çš„åŠªåŠ›éƒ½æœ‰å›æŠ¥ã€‚",
                        "åˆå®‰ï¼Œæ„¿ç§‹é£å¸¦èµ°ä½ çš„çƒ¦æ¼å’Œç–²æƒ«ã€‚ğŸ‚",
                        "ç§‹æ—¥çš„åˆåï¼Œæ¯ä¸€å¸§éƒ½åƒç”µå½±ç”»é¢ã€‚ğŸ¬",
                        "é˜³å…‰æ­£å¥½ï¼Œæ¸©åº¦ä¹Ÿæ­£å¥½ï¼Œä¸€åˆ‡éƒ½åˆšåˆšå¥½ã€‚",
                        "æ¥å—çƒ¤çº¢è–¯æˆ–æ˜¯ç³–ç‚’æ —å­æ€ä¹ˆæ ·ï¼ŸğŸŒ°",
                        "ä¸‹åˆçŠ¯å›°çš„è¯ï¼Œå°±çœ‹çœ‹çª—å¤–çš„è“å¤©ç™½äº‘å§ã€‚"
                    ],
                    evening: [
                        "æ™šä¸Šå¥½ï¼Œç§‹é£é€çˆ½ï¼Œæœˆè‰²å®œäººã€‚ğŸŒ•",
                        "ä¸¹æ¡‚é£˜é¦™çš„å¤œæ™šï¼Œé€‚åˆæ€å¿µå’Œå›¢åœ†ã€‚",
                        "ç§‹å¤©çš„å¤œæ™šï¼Œæ˜¯æ€å¿µçš„å­£èŠ‚ï¼Œä¹Ÿæ˜¯å…»è†˜çš„å­£èŠ‚ã€‚",
                        "æ™šæ¥ç§‹ï¼Œå¤©å‡‰å¦‚æ°´ï¼Œæ—©ç‚¹ä¼‘æ¯å§ã€‚",
                        "æ™šä¸Šå¥½ï¼Œä»Šå¤©ä½ çœ‹åˆ°ç¾ä¸½çš„è½æ—¥äº†å—ï¼Ÿ",
                        "ç§‹å¤©çš„å¤œæ™šï¼Œæ€»è®©äººæ„Ÿè§‰æ ¼å¤–å®é™å’Œèˆ’é€‚ã€‚",
                        "å¤©æ°”è½¬å‡‰ï¼Œæ™šé¤è¦åƒå¾—æš–æš–å’Œå’Œçš„ã€‚",
                        "æœˆäº®æŒ‚åœ¨æå¤´ï¼Œåƒä¸€é¢—ç†Ÿé€çš„æœå­ã€‚æ™šå®‰ã€‚"
                    ],
                    night: [
                        "å¤œæ·±äº†ï¼Œç§‹æ„æ¸æµ“ï¼Œæ™šå®‰å¥½æ¢¦ã€‚ğŸŒ™",
                        "æ„¿ä½ ä¼´ç€çª—å¤–çš„æ¡‚èŠ±é¦™ï¼Œç”œç”œåœ°è¿›å…¥æ¢¦ä¹¡ã€‚",
                        "å¤©é˜¶å¤œè‰²å‡‰å¦‚æ°´ï¼Œå§çœ‹ç‰µç‰›ç»‡å¥³æ˜Ÿã€‚æ™šå®‰ã€‚",
                        "è¢«å­è¦ç›–åšä¸€ç‚¹äº†ï¼Œå¤œé‡Œä¼šé™æ¸©çš„ã€‚ğŸ˜´",
                        "å¤œæ·±äº†ï¼ŒæŠŠå¿ƒäº‹æ”¾ä¸€è¾¹ï¼Œå¥½å¥½ç¡è§‰æœ€é‡è¦ã€‚",
                        "æœ€èˆ’æœçš„äº‹ï¼Œè«è¿‡äºåœ¨å¾®å‡‰çš„ç§‹å¤œé‡Œç›–ç€æŸ”è½¯çš„è¢«å­ã€‚",
                        "æ™šå®‰ï¼Œæ„¿ä½ æ¢¦é‡Œæœ‰é‡‘è‰²çš„éº¦ç”°å’Œæœå®ã€‚",
                        "æ˜å¤©ä¼šæ›´å¥½ï¼Œå¿«ç¡å§ã€‚"
                    ]
                },
                winter: { // å†¬å­£ (12-2æœˆ)
                    morning: [
                        "æ—©ä¸Šå¥½ï¼Œè™½ç„¶å¤©æ°”å¯’å†·ï¼Œä½†ä¹Ÿè¦æ‹¥æŠ±é˜³å…‰å“¦ã€‚â„ï¸",
                        "æ—©å®‰ï¼Œå†¬å¤©æœ€å¹¸ç¦çš„äº‹ï¼Œå°±æ˜¯é†’æ¥æ—¶çª—å¤–æœ‰é˜³å…‰ã€‚",
                        "èµ·åºŠå¤§ä½œæˆ˜å¼€å§‹äº†ï¼ç¥ä½ æˆåŠŸï¼ğŸ’ª",
                        "å†¬æ—¥æ¸…æ™¨ï¼Œæ¥ä¸€æ¯çƒ­é¥®ï¼Œæ¸©æš–ä¸€æ•´å¤©ã€‚â˜•ï¸",
                        "æ—©å®‰ï¼ä»Šå¤©ä½ å’Œä½ çš„åºŠåˆ†ç¦»æˆåŠŸäº†å—ï¼Ÿ",
                        "çª—æˆ·ä¸Šç»“äº†éœœèŠ±ï¼Œå†¬å¤©çœŸçš„æ¥å•¦ã€‚â„ï¸",
                        "åƒä¸€é¡¿çƒ­æ°”è…¾è…¾çš„æ—©é¤ï¼Œæ˜¯å¯¹å†¬å¤©æ—©æ™¨æœ€å¤§çš„å°Šé‡ã€‚",
                        "å‘¼ä¸€å£æ°”éƒ½æ˜¯ç™½è‰²çš„ï¼Œè¿™æ‰æ˜¯å†¬å¤©çš„æ„Ÿè§‰ã€‚"
                    ],
                    afternoon: [
                        "ä¸‹åˆå¥½ï¼Œæ™’æ™’å†¬æ—¥çš„å¤ªé˜³ï¼Œæ•´ä¸ªäººéƒ½æš–æ´‹æ´‹çš„ã€‚",
                        "æ³¡ä¸ªçƒ­æ°´è„šï¼Œæ˜¯å¯¹å†¬å¤©ä¸‹åˆæœ€å¥½çš„å°Šé‡ã€‚",
                        "å¤©æ°”è¿™ä¹ˆå†·ï¼Œä¸å¦‚â€¦åƒé¡¿ç«é”…ï¼ŸğŸ²",
                        "åˆå®‰ï¼Œæ„¿è¿™ä¸ªå†¬å¤©ï¼Œæœ‰äººä¸ä½ ç«‹é»„æ˜ï¼Œæœ‰äººé—®ä½ ç²¥å¯æ¸©ã€‚",
                        "å†¬æ—¥çš„åˆåçŸ­æš‚åˆçè´µï¼Œå¤šæ™’æ™’å¤ªé˜³å§ã€‚",
                        "ä¸€æ¯çƒ­å¯å¯ï¼Œä¸€ä»½å¥½å¿ƒæƒ…ï¼Œé€ç»™è¿™ä¸ªä¸‹åˆçš„ä½ ã€‚â˜•ï¸",
                        "å¤–é¢å¤©å¯’åœ°å†»ï¼Œè¿˜æ˜¯å¾…åœ¨å®¤å†…æœ€èˆ’æœäº†ã€‚",
                        "ç¦»å¤©é»‘åˆè¿‘äº†ä¸€æ­¥ï¼Œçæƒœç™½å¤©çš„æ—¶å…‰ã€‚"
                    ],
                    evening: [
                        "æ™šä¸Šå¥½ï¼Œçª—å¤–å¤©å¯’åœ°å†»ï¼Œå±‹å†…æ¸©æš–å¦‚æ˜¥ã€‚",
                        "å†¬å¤©æœ€é€‚åˆçªåœ¨æ²™å‘é‡Œï¼Œçœ‹ä¸€éƒ¨æ¸©æš–çš„ç”µå½±ã€‚ğŸ¬",
                        "é›ªè½ä¸‹çš„å£°éŸ³ï¼Œæ˜¯å†¬å¤œçš„äº¤å“æ›²ã€‚",
                        "æ™šæ¥å¤©æ¬²é›ªï¼Œèƒ½é¥®ä¸€æ¯æ— ï¼Ÿ",
                        "æ™šä¸Šå¥½ï¼Œå›å®¶è·¯ä¸Šæ³¨æ„ä¿æš–å‘€ã€‚",
                        "å†¬å¤œçš„ç¯ç«ï¼Œçœ‹èµ·æ¥æ€»æ˜¯æ ¼å¤–æ¸©æš–ã€‚",
                        "å¿™äº†ä¸€å¤©ï¼Œçªåœ¨æ²™å‘é‡Œå°±æ˜¯æœ€å¤§çš„å¹¸ç¦ã€‚",
                        "å¤©å†·äº†ï¼Œä»Šæ™šåƒç‚¹çƒ­ä¹çš„å§ï¼"
                    ],
                    night: [
                        "å¤œæ·±äº†ï¼Œé’»è¿›æ¸©æš–çš„è¢«çªï¼Œå’Œä¸–ç•Œè¯´æ™šå®‰ã€‚ğŸ›Œ",
                        "æ™šå®‰ï¼Œæ„¿ä½ ä¸€å¤œæ— æ¢¦ï¼Œå®‰ç¡åˆ°å¤©äº®ã€‚",
                        "å†¬å¤©ï¼Œæ˜¯é€‚åˆæ—©ç¡çš„å­£èŠ‚ï¼Œæ™šå®‰ã€‚",
                        "è¯·æŸ¥æ”¶ä½ çš„å†¬æ—¥é™å®šå¥½æ¢¦ã€‚ğŸŒ™",
                        "æ™šå®‰ï¼Œè®©æ¸©æš–çš„è¢«çªæ²»æ„ˆä½ çš„ä¸€åˆ‡ã€‚",
                        "å¬ç€çª—å¤–çš„é£å£°ï¼Œå®‰ç¨³åœ°ç¡å§ã€‚",
                        "åˆ«ç†¬å¤œäº†ï¼Œå¯¹å¾—èµ·è¿™ä¹ˆå†·çš„å¤©å—ï¼Ÿå¿«å»ç¡è§‰ï¼",
                        "æ™šå®‰ï¼Œæ„¿ä½ æ¢¦é‡Œé˜³å…‰æ™®ç…§ï¼Œæ˜¥æš–èŠ±å¼€ã€‚"
                    ]
                },
                default: [ // é»˜è®¤/å¤‡ç”¨é—®å€™è¯­
                    "ä½ å¥½å‘€ï¼Œä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ",
                    "æ„¿ä½ çœ¼é‡Œçš„æ˜Ÿæ˜Ÿï¼Œæ°¸è¿œé—ªäº®ã€‚",
                    "æ— è®ºå¤©æ°”å¦‚ä½•ï¼Œè®°å¾—å¸¦ä¸Šè‡ªå·±çš„é˜³å…‰ã€‚",
                    "å¸Œæœ›ä½ ä»Šå¤©ä¹Ÿèƒ½å¼€å¿ƒï¼",
                    "å˜¿ï¼Œé™Œç”Ÿäººï¼Œç¥ä½ ä»Šå¤©å¼€å¿ƒã€‚",
                    "ç”Ÿæ´»æˆ–è®¸ä¸æ˜“ï¼Œä½†è¯·åˆ«å¿˜äº†å¾®ç¬‘ã€‚ğŸ˜Š",
                    "æ¯ä¸€å¤©éƒ½æ˜¯ä¸€ä»½ç‹¬ä¸€æ— äºŒçš„ç¤¼ç‰©ã€‚",
                    "å·å·å‘Šè¯‰ä½ ï¼Œä½ å¾ˆæ£’ï¼",
                    "æ„¿ä½ æ‰€åˆ°ä¹‹å¤„ï¼Œçš†ä¸ºçƒ­åœŸï¼›æ„¿ä½ æ‰€é‡ä¹‹äººï¼Œçš†ä¸ºè‰¯å–„ã€‚"
                ]
            };

            // åˆ¤æ–­å­£èŠ‚
            let season = 'default';
            if (month >= 3 && month <= 5) {
                season = 'spring';
            } else if (month >= 6 && month <= 8) {
                season = 'summer';
            } else if (month >= 9 && month <= 11) {
                season = 'autumn';
            } else { // 12, 1, 2æœˆ
                season = 'winter';
            }

            // åˆ¤æ–­æ—¶é—´æ®µ
            let timeOfDay = 'night';
            if (hour >= 5 && hour < 12) {
                timeOfDay = 'morning';
            } else if (hour >= 12 && hour < 18) {
                timeOfDay = 'afternoon';
            } else if (hour >= 18 && hour < 22) {
                timeOfDay = 'evening';
            }

            // è·å–å¯¹åº”çš„é—®å€™è¯­åˆ—è¡¨
            const availableGreetings = greetings[season][timeOfDay] || greetings.default;
            
            // éšæœºé€‰æ‹©ä¸€æ¡é—®å€™è¯­å¹¶æ˜¾ç¤º
            const randomGreeting = availableGreetings[Math.floor(Math.random() * availableGreetings.length)];
            greetingEl.textContent = randomGreeting;
        }

        // --- [REFACTORED] æ—¥å†è®¡ç®—æ ¸å¿ƒå‡½æ•° ---
        function lYearDays(y) { let i, sum = 348; for (i = 0x8000; i > 0x8; i >>= 1) sum += (lunarInfo[y - 1900] & i) ? 1 : 0; return (sum + leapDays(y)); }
        function leapDays(y) { if (leapMonth(y)) return ((lunarInfo[y - 1900] & 0x10000) ? 30 : 29); else return (0); }
        function leapMonth(y) { return (lunarInfo[y - 1900] & 0xf); }
        function monthDays(y, m) { return ((lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29); }
        function Dianaday(objDate) { var i, leap = 0, temp = 0; var baseDate = new Date(1900, 0, 31); var offset = (objDate - baseDate) / 86400000; this.dayCyl = offset + 40; this.monCyl = 14; for (i = 1900; i < 2050 && offset > 0; i++) { temp = lYearDays(i); offset -= temp; this.monCyl += 12; } if (offset < 0) { offset += temp; i--; this.monCyl -= 12; } this.year = i; this.yearCyl = i - 1864; leap = leapMonth(i); this.isLeap = false; for (i = 1; i < 13 && offset > 0; i++) { if (leap > 0 && i == (leap + 1) && this.isLeap == false) { --i; this.isLeap = true; temp = leapDays(this.year); } else { temp = monthDays(this.year, i); } if (this.isLeap == true && i == (leap + 1)) this.isLeap = false; offset -= temp; if (this.isLeap == false) this.monCyl++; } if (offset == 0 && leap > 0 && i == leap + 1) if (this.isLeap) { this.isLeap = false; } else { this.isLeap = true; --i; --this.monCyl; } if (offset < 0) { offset += temp; --i; --this.monCyl; } this.month = i; this.day = offset + 1; }
        
        function getAllHolidaysForYear(year) {
            let allEvents = [];
            
            function getSolarDateForLunar(targetYear, lunarMonth, lunarDay) {
                for (let i = 0; i < 366; i++) {
                    const checkDate = new Date(targetYear, 0, 1);
                    checkDate.setDate(checkDate.getDate() + i);
                    if (checkDate.getFullYear() !== targetYear) break;
                    const lunarDateInfo = new Dianaday(checkDate);
                    if (lunarDateInfo.month === lunarMonth && lunarDateInfo.day === lunarDay && !lunarDateInfo.isLeap) return checkDate;
                }
                return null;
            }

            // å…¬å†èŠ‚æ—¥
            sFtv.forEach(holiday => {
                const month = parseInt(holiday.substr(0, 2));
                const day = parseInt(holiday.substr(2, 2));
                const name = holiday.substr(5);
                allEvents.push({ name, date: new Date(year, month - 1, day) });
            });

            // å†œå†èŠ‚æ—¥
            const allLunarHolidays = [...lFtv, "1230 é™¤å¤•"];
            allLunarHolidays.forEach(holiday => {
                const name = holiday.substr(5);
                if (name === 'é™¤å¤•') {
                    const cnyDate = getSolarDateForLunar(year + 1, 1, 1); // Check next year's CNY to find this year's eve
                    if (cnyDate) {
                        let eveDate = new Date(cnyDate);
                        eveDate.setDate(eveDate.getDate() - 1);
                        if (eveDate.getFullYear() === year) {
                           allEvents.push({ name: 'é™¤å¤•', date: eveDate });
                        }
                    }
                } else {
                    const lMonth = parseInt(holiday.substr(0, 2));
                    const lDay = parseInt(holiday.substr(2, 2));
                    const holidayDate = getSolarDateForLunar(year, lMonth, lDay);
                    if (holidayDate) allEvents.push({ name, date: holidayDate });
                }
            });

            // èŠ‚æ°”
            solarTerm.forEach((termName, i) => {
                const offDate = new Date((31556925974.7 * (year - 1900) + sTermInfo[i] * 60000) + Date.UTC(1900, 0, 6, 2, 5));
                allEvents.push({ name: termName, date: new Date(offDate.getUTCFullYear(), offDate.getUTCMonth(), offDate.getUTCDate()) });
            });

            // å‘¨æ—¥è®¡ç®—çš„èŠ‚æ—¥
            const mayFirst = new Date(year, 4, 1);
            const mothersDay = new Date(year, 4, 1 + (7 - mayFirst.getDay() + 7) % 7 + 7);
            allEvents.push({ name: 'æ¯äº²èŠ‚', date: mothersDay });

            const juneFirst = new Date(year, 5, 1);
            const fathersDay = new Date(year, 5, 1 + (7 - juneFirst.getDay() + 7) % 7 + 14);
            allEvents.push({ name: 'çˆ¶äº²èŠ‚', date: fathersDay });

            const novFirst = new Date(year, 10, 1);
            const thanksgivingDay = new Date(year, 10, 1 + (4 - novFirst.getDay() + 7) % 7 + 21);
            allEvents.push({ name: 'æ„Ÿæ©èŠ‚', date: thanksgivingDay });
            
            // æ’åºå¹¶è¿”å›
            return allEvents.sort((a, b) => a.date - b.date);
        }

        // --- ä¸»å€’è®¡æ—¶å¡ç‰‡æ›´æ–° ---
        function updateCountdown() {
            const countdownDisplay = document.getElementById('countdown-display');
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            
            const currentYearEvents = getAllHolidaysForYear(now.getFullYear());
            const nextYearEvents = getAllHolidaysForYear(now.getFullYear() + 1);

            const upcomingEvents = [...currentYearEvents, ...nextYearEvents].filter(event => event.date >= today);

            if (upcomingEvents.length > 0) {
                const nextHoliday = upcomingEvents[0];
                const diffTime = nextHoliday.date - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays === 0) {
                    countdownDisplay.innerHTML = `<span class="text-lg text-white">ä»Šå¤©</span><br><strong class="text-3xl font-bold text-sky-300">${nextHoliday.name}</strong>`;
                } else {
                    countdownDisplay.innerHTML = `<span class="text-white">è·ç¦»</span><br><strong class="text-xl text-white">${nextHoliday.name}</strong><br><span class="font-bold text-5xl align-baseline">${diffDays}</span><span class="text-lg align-baseline ml-1">å¤©</span>`;
                }
            } else {
                countdownDisplay.textContent = 'æ‰€æœ‰èŠ‚æ—¥éƒ½å·²è®¡ç®—å®Œæ¯•ï¼';
            }
        }

        // --- èŠ‚æ—¥åˆ—è¡¨è§†å›¾æ›´æ–° ---
        function displayHolidayList(year) {
            const container = document.getElementById('holiday-list-container');
            const yearDisplay = document.getElementById('holiday-list-year');
            yearDisplay.textContent = year;
            
            const allHolidays = getAllHolidaysForYear(year);
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            const firstUpcoming = [...getAllHolidaysForYear(now.getFullYear()), ...getAllHolidaysForYear(now.getFullYear() + 1)]
                .filter(e => e.date >= today)[0];

            const holidaysByMonth = allHolidays.reduce((acc, holiday) => {
                const month = holiday.date.getMonth();
                if (!acc[month]) acc[month] = [];
                acc[month].push(holiday);
                return acc;
            }, {});

            let html = '';
            for (let month = 0; month < 12; month++) {
                if (holidaysByMonth[month]) {
                    html += `<div class="mb-3"><h3 class="text-lg font-semibold text-white/80 border-b border-white/10 pb-1 mb-2">${month + 1}æœˆ</h3>`;
                    holidaysByMonth[month].forEach(holiday => {
                        const diffTime = holiday.date - today;
                        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                        let statusText = '';
                        if (holiday.date.getFullYear() < now.getFullYear() || (holiday.date.getFullYear() === now.getFullYear() && diffDays < -1)) {
                            statusText = `<span class="text-gray-500">å·²è¿‡</span>`;
                        } else if (diffDays === -1) {
                            statusText = `<span class="text-yellow-400">æ˜¨å¤©</span>`;
                        } else if (diffDays === 0) {
                            statusText = `<span class="text-green-400 font-bold">ä»Šå¤©</span>`;
                        } else {
                            statusText = `<span class="text-sky-300">${diffDays + 1} å¤©</span>`;
                        }
                        
                        const isHighlighted = firstUpcoming && firstUpcoming.name === holiday.name && firstUpcoming.date.getTime() === holiday.date.getTime();
                        const highlightClass = isHighlighted ? 'highlight-holiday' : '';

                        html += `
                            <div class="flex justify-between items-center p-2 rounded-lg ${highlightClass}">
                                <div>
                                    <span class="text-white">${holiday.name}</span>
                                    <span class="text-xs text-gray-400 ml-2">${String(holiday.date.getMonth() + 1).padStart(2, '0')}-${String(holiday.date.getDate()).padStart(2, '0')}</span>
                                </div>
                                ${statusText}
                            </div>
                        `;
                    });
                    html += `</div>`;
                }
            }
            container.innerHTML = html;
        }

        // --- Hitokoto ä¸€è¨€ åŠŸèƒ½ ---
        let isUpdatingQuote = false;
        async function fetchHitokoto() {
            if (isUpdatingQuote) return;
            isUpdatingQuote = true;
            const hitokotoText = document.getElementById('hitokoto-text');
            const hitokotoFrom = document.getElementById('hitokoto-from');
            hitokotoText.classList.add('opacity-0');
            hitokotoFrom.classList.add('opacity-0');
            try {
                await new Promise(resolve => setTimeout(resolve, 500));
                const response = await fetch('https://v1.hitokoto.cn/?encode=json');
                if (!response.ok) throw new Error('Network response was not ok.');
                const data = await response.json();
                hitokotoText.textContent = data.hitokoto;
                hitokotoFrom.textContent = `â€” ã€Œ${data.from || 'æœªçŸ¥æ¥æº'}ã€`;
            } catch (error) {
                console.error("è·å–ä¸€è¨€å¤±è´¥:", error);
                hitokotoText.textContent = 'è·å–ä¸€è¨€å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚';
                hitokotoFrom.textContent = '';
            } finally {
                hitokotoText.classList.remove('opacity-0');
                hitokotoFrom.classList.remove('opacity-0');
                setTimeout(() => { isUpdatingQuote = false; }, 600);
            }
        }

        // --- æ—¶å…‰èƒ¶å›ŠåŠŸèƒ½ ---
        function updateTimeCapsule() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const dayOfMonth = now.getDate();
            const dayOfWeek = now.getDay(); // 0 for Sunday, 1 for Monday, etc.
            const hour = now.getHours();

            // 1. ä»Šæ—¥è¿›åº¦
            const dayPassed = hour;
            const dayLeft = 24 - dayPassed;
            const dayPercent = (dayPassed / 24) * 100;
            document.getElementById('day-passed').textContent = dayPassed;
            document.getElementById('day-left').textContent = dayLeft;
            document.getElementById('day-percent').textContent = `${dayPercent.toFixed(1)}%`;
            document.getElementById('day-progress').style.width = `${dayPercent}%`;

            // 2. æœ¬å‘¨è¿›åº¦ (å‘¨ä¸€ä¸ºç¬¬ä¸€å¤©)
            const weekPassed = dayOfWeek === 0 ? 7 : dayOfWeek;
            const weekLeft = 7 - weekPassed;
            const weekPercent = (weekPassed / 7) * 100;
            document.getElementById('week-passed').textContent = weekPassed;
            document.getElementById('week-left').textContent = weekLeft;
            document.getElementById('week-percent').textContent = `${weekPercent.toFixed(1)}%`;
            document.getElementById('week-progress').style.width = `${weekPercent}%`;

            // 3. æœ¬æœˆè¿›åº¦
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const monthPassed = dayOfMonth;
            const monthLeft = daysInMonth - monthPassed;
            const monthPercent = (monthPassed / daysInMonth) * 100;
            document.getElementById('month-passed').textContent = monthPassed;
            document.getElementById('month-left').textContent = monthLeft;
            document.getElementById('month-percent').textContent = `${monthPercent.toFixed(1)}%`;
            document.getElementById('month-progress').style.width = `${monthPercent}%`;

            // 4. ä»Šå¹´è¿›åº¦
            const startOfYear = new Date(year, 0, 1);
            const endOfYear = new Date(year, 11, 31);
            const totalDaysInYear = (endOfYear - startOfYear) / (1000 * 60 * 60 * 24) + 1;
            const yearPassed = Math.ceil((now - startOfYear) / (1000 * 60 * 60 * 24));
            const yearLeft = totalDaysInYear - yearPassed;
            const yearPercent = (yearPassed / totalDaysInYear) * 100;
            document.getElementById('year-passed').textContent = yearPassed;
            document.getElementById('year-left').textContent = yearLeft;
            document.getElementById('year-percent').textContent = `${yearPercent.toFixed(1)}%`;
            document.getElementById('year-progress').style.width = `${yearPercent}%`;
        }
        
        // --- ç½‘ç«™è¿è¡Œæ—¶é—´ ---
        function updateSiteRuntime() {
             const startTime = new Date('2025-07-30T18:30:00');
            const now = new Date();
            const diff = now - startTime;

            const displayElement = document.getElementById('site-runtime-display');
            if (!displayElement) return;

            if (diff < 0) {
                displayElement.textContent = 'å°ç ´ç«™å°šæœªå¯èˆª...';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            displayElement.innerHTML = `å°ç ´ç«™å·²ç»åœ¨é£é›¨ä¸­åº¦è¿‡äº† <span class="text-white font-semibold runtime-number">${days}</span> å¤© <span class="text-white font-semibold runtime-number">${hours}</span> å°æ—¶ <span class="text-white font-semibold runtime-number">${minutes}</span> åˆ† <span class="text-white font-semibold runtime-number">${seconds}</span> ç§’`;
        }

        // --- äº¤äº’äº‹ä»¶ç›‘å¬ ---
        function setupEventListeners() {
            const animateRightColumnIn = () => {
                const elementsToAnimate = rightColumn.querySelectorAll(':scope > div');
                elementsToAnimate.forEach(el => {
                    el.classList.remove('bounce-in');
                    void el.offsetWidth;
                    el.classList.add('bounce-in');
                });
            };

            // åˆ‡æ¢åˆ°æ—¶å…‰èƒ¶å›Š
            profileCard.addEventListener('click', () => {
                const rightColumnHeight = rightColumn.offsetHeight;
                timeCapsuleCard.style.minHeight = `${rightColumnHeight}px`;
                rightColumn.classList.add('hidden');
                holidayListCard.classList.add('hidden');
                timeCapsuleCard.classList.remove('hidden');
                timeCapsuleCard.classList.add('bounce-in');
                updateTimeCapsule();
            });

            // å…³é—­æ—¶å…‰èƒ¶å›Š
            document.getElementById('close-time-capsule').addEventListener('click', (e) => {
                e.stopPropagation();
                timeCapsuleCard.classList.add('hidden');
                rightColumn.classList.remove('hidden');
                animateRightColumnIn();
            });

            // åˆ‡æ¢åˆ°èŠ‚æ—¥åˆ—è¡¨
            countdownCard.addEventListener('click', () => {
                const rightColumnHeight = rightColumn.offsetHeight;
                holidayListCard.style.minHeight = `${rightColumnHeight}px`;
                rightColumn.classList.add('hidden');
                timeCapsuleCard.classList.add('hidden');
                holidayListCard.classList.remove('hidden');
                holidayListCard.classList.add('bounce-in');
                holidayListDisplayedYear = new Date().getFullYear();
                displayHolidayList(holidayListDisplayedYear);
                new SimpleBar(document.getElementById('holiday-list-container-wrapper'));
            });

            // å…³é—­èŠ‚æ—¥åˆ—è¡¨
            document.getElementById('close-holiday-list').addEventListener('click', (e) => {
                e.stopPropagation();
                holidayListCard.classList.add('hidden');
                rightColumn.classList.remove('hidden');
                animateRightColumnIn();
            });

            // èŠ‚æ—¥åˆ—è¡¨å¹´ä»½åˆ‡æ¢
            document.getElementById('prev-year').addEventListener('click', () => {
                holidayListDisplayedYear--;
                displayHolidayList(holidayListDisplayedYear);
            });
            document.getElementById('next-year').addEventListener('click', () => {
                holidayListDisplayedYear++;
                displayHolidayList(holidayListDisplayedYear);
            });

            // ç‚¹å‡»ä¸€è¨€å¡ç‰‡åˆ·æ–°
            document.getElementById('hitokoto-card').addEventListener('click', fetchHitokoto);
        }

        // --- é¡µé¢åŠ è½½æ—¶æ‰§è¡Œçš„å‡½æ•° ---
        document.addEventListener('DOMContentLoaded', () => {
            setRandomBackground();
            updateTime();
            updateGreeting();
            updateCountdown();
            fetchHitokoto();
            setupEventListeners();
            updateSiteRuntime();
            updateTimeCapsule();
            
            setInterval(updateTime, 1000);
            setInterval(updateSiteRuntime, 1000);
            setInterval(updateGreeting, 1800000); 
            setInterval(updateCountdown, 3600000); 
            setInterval(updateTimeCapsule, 60000);
        });
    </script>
</body>
</html>
