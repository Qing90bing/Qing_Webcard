# 时间胶囊 (Time Capsule) 功能模块

## 目录概述

本模块负责实现“时间胶囊”功能。这是一个信息展示型组件，旨在通过可视化的方式，提醒用户时间的流逝。

它会以进度条的形式，直观地展示出**今日**、**本周**、**本月**以及**本年**已经过去了多少百分比。

---

## 文件详解

### `time-capsule.js` - 时间进度计算与显示

#### 职责

由于本模块功能相对内聚，所有逻辑都包含在这一个文件中。其核心职责是：

1.  **时间计算**:
    -   获取当前的日期和时间。
    -   执行一系列计算来确定各个时间维度的进度。这包含了处理一些日期计算中的复杂情况，例如：正确获取当月有多少天，以及判断当年是否为闰年（366天）等。

2.  **UI 更新**:
    -   将计算出的结果（如“已过去12小时”，“剩余12小时”）更新到对应的HTML元素中。
    -   动态地修改进度条元素的 `style.width` 属性，使其宽度（百分比）与计算出的时间进度相匹配，从而实现视觉上的填充效果。

3.  **定时更新**:
    -   在模块初始化时，会立即执行一次计算和更新，以保证页面加载后能马上看到数据。
    -   然后，它会启动一个定时器 (`setInterval`)，每分钟重新运行一次计算和更新的流程，确保进度条能够随着时间的推移而缓慢增长，保持显示内容的准确性。

---

## > 给初学者的小贴士：如何优雅地获取一个月的天数？

在 `time-capsule.js` 中，有一个非常聪明和简洁的 JavaScript `Date` 对象技巧，被用来获取指定月份的总天数。

**传统的笨方法**可能是写一长串的 `if/else` 或者 `switch` 语句来判断：如果月份是1, 3, 5...则31天；如果是4, 6, 9...则30天；如果是2月，还要判断是不是闰年... 这非常繁琐且容易出错。

**优雅的技巧：**

**代码片段 (`time-capsule.js`):**
```javascript
// 假设 year = 2024, month = 1 (代表二月, 因为月份从0开始)
const daysInMonth = new Date(year, month + 1, 0).getDate();
// 结果: daysInMonth 会是 29
```

**这个技巧是如何工作的？**

1.  `new Date(year, month + 1, 0)` 尝试去创建一个表示**下一个月第 0 天**的日期。
2.  JavaScript 的 `Date` 对象很巧妙地将“第0天”解释为“第一天的前一天”。
3.  所以，“下一个月的第一天的前一天”正好就是**当前月的最后一天**。
4.  例如，对于2024年2月（`month`为1），`new Date(2024, 2, 0)` 实际上创建的是2024年3月0日的日期，也就是2024年2月29日。
5.  最后，调用 `.getDate()` 方法，就能直接得到这个“最后一天”的号数，即 `29`，这恰好就是当月的总天数。

这个方法简洁地处理了所有月份的天数差异，包括闰年2月的特殊情况，非常值得学习。
