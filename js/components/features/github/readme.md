# GitHub 功能模块 (GitHub Feature)

## 目录概述

本模块负责所有与 GitHub API 的集成功能。

它包含了获取和展示项目贡献图以及最新提交历史记录的全部逻辑。

---

## 文件详解

### `github-chart.js` - GitHub 贡献图加载器

#### 职责

此文件负责管理 GitHub 贡献图的加载与显示。贡献图本身是一张由外部服务生成的图片。这个脚本的核心工作是优雅地处理这张图片的**三种状态**：

1.  **加载中**: 显示一个加载动画 (spinner)，给用户提供等待反馈。
2.  **加载成功**: 以平滑的淡入动画展示图片。
3.  **加载失败**: 隐藏加载动画，并显示一个用户友好的错误信息，用户可以点击该信息以尝试重新加载。

### `commit-history.js` - GitHub 提交历史

#### 职责

此文件负责从本项目的 GitHub 仓库拉取最新的提交记录，并将其动态地渲染成一个美观、易读的时间线视图。

它的主要工作流程是：
1.  通过 `fetch` 调用 GitHub API。
2.  对返回的 `JSON` 数据进行处理，按日期进行分组。
3.  将处理后的数据构造成 HTML 字符串。
4.  将 HTML 渲染到页面上，并管理加载、成功和失败状态。
5.  额外实现了一个滚动遮罩效果，以提升长列表的滚动体验。

---

## 技术实现细节

### CORS 代理与缓存处理

为了在任何域名下都能成功请求 GitHub API 而不遇到浏览器的跨域资源共享（CORS）问题，本项目中的 `fetch` 请求被路由到了一个公共的 CORS 代理服务 (`cors.eu.org`)。

同时，为了确保每次都能获取到最新的数据而不是浏览器缓存的旧数据，API 的 URL 后面被附加了一个时间戳查询参数。

**代码片段示例 (`commit-history.js`):**
```javascript
// 注意 URL 的两部分
const response = await fetch(`https://cors.eu.org/https://api.github.com/repos/Qing90bing/Qing_Webcard/commits?per_page=30&v=${new Date().getTime()}`);
//                                 ^^^^^^^^^^^^^^^^^^ CORS 代理                                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 时间戳参数，防止缓存
```

### 懒加载与滚动遮罩 (Lazy Loading & Scroll Mask)

#### 懒加载

为了优化性能，GitHub 的提交历史数据并不会在页面加载时就去获取，而是在用户第一次点击打开“关于”卡片时，才触发 `fetchAndRenderCommits()` 函数。这种只在需要时才加载数据的策略被称为“懒加载”。

#### 滚动遮罩

在 `commit-history.js` 中，`updateCommitMask` 函数实现了一个精巧的视觉效果。当提交历史列表可以滚动时，它会在列表的顶部和底部动态地应用一个半透明的渐变叠加层（遮罩）。

-   当列表滚动到最顶部时，顶部遮罩消失。
-   当列表滚动到最底部时，底部遮罩消失。

这个效果通过计算滚动位置，并动态地设置 CSS 自定义属性 (`--fade-top-size`, `--fade-bottom-size`) 来实现，从而给用户明确的视觉提示：“这里还有更多内容可以滚动查看”。这是一个提升用户体验（UX）的细节。
