# 沉浸模式模块 (Immersive Mode)

## 目录概述

本模块负责管理与“沉浸模式”（即全屏时钟视图）相关的特定功能和设置。

当用户点击主时钟卡片时，应用会进入一个只显示时间、日期和问候语的全屏界面，这个界面就是沉浸模式。此模块就是为了管理这个特殊视图下的独有逻辑。

---

## 文件详解

### `immersive-mode.js` - 沉浸模式设置管理器

#### 职责

目前，这个文件的职责非常专一：它只管理沉浸模式下时钟**冒号是否闪烁**的这一项设置。

1.  **事件监听 (Event Listener)**:
    -   它会找到设置面板中“沉浸模式冒号闪烁”的开关元素，并为其绑定一个 `change` 事件监听器。

2.  **设置更新 (Settings Update)**:
    -   当用户点击该开关时，监听器会触发，将 `appSettings.immersiveBlinkingColon` 的布尔值（`true` 或 `false`）进行更新，并调用 `saveSettings()` 将其保存。

3.  **样式应用 (Style Application)**:
    -   在更新设置后，它会调用 `applyBlinkingEffect()` 函数。这个函数的工作非常简单，就是根据 `appSettings.immersiveBlinkingColon` 的值，在 `<body>` 元素上添加或移除一个名为 `immersive-blink-enabled` 的CSS类。
    -   实际的闪烁动画效果，完全由CSS代码根据是否存在这个类来处理。

---

## 设计思想

### 关注点分离 (Separation of Concerns)

你可能会问，只是一个小小的冒号闪烁功能，为什么需要一个独立的目录和文件，而不是直接把代码写在 `js/components/ui/clock/clock.js` 里呢？

这是一个很好的问题，它体现了本项目在代码组织上的“关注点分离”原则。

1.  **职责的归属**: “冒号闪烁”这个功能，它只在**沉浸模式**下生效，与常规的主时钟视图无关。因此，它的逻辑不属于通用的 `clock.js`。将它放在 `immersive-mode.js` 中，文件名和目录结构就能清晰地告诉我们，这段代码的作用域是什么。

2.  **代码的可扩展性**: 这种组织方式为未来做好了准备。可以预见，未来沉浸模式可能会增加更多的自定义功能，例如：
    -   允许用户自定义沉浸模式下的字体颜色。
    -   允许用户在沉浸模式下显示/隐藏天气信息。
    -   提供不同的沉浸模式动画效果。

    当需要添加这些新功能时，我们只需要在这个 `immersive-mode.js` 文件中继续添加逻辑即可，而不会让 `clock.js` 或其他文件变得越来越臃肿和混乱。

即使是对于一个很小的功能，良好的代码组织和对未来扩展性的考量，也是优秀软件工程的体现。
