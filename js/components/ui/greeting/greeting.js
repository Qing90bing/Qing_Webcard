/**
 * @file greeting.js
 * @description
 * 本文件负责根据一天中的不同时段和季节，动态地向用户显示友好的问候语。
 *
 * @module components/ui/greeting
 */

/**
 * @description 更新问候语。
 * 它会根据当前的时间和月份，从一个大型问候语数据库中选择一条合适的信息来显示。
 */
function updateGreeting() {
    const greetingEl = document.getElementById('greeting');
    if (!greetingEl) return;

    const now = new Date();
    const hour = now.getHours();
    const month = now.getMonth() + 1;

    // 一个大型的问候语数据库，按 季节 -> 时段 的结构组织。
    const greetings = {
        spring: {
            morning: [
                "早上好，春意盎然，愿你的一天如诗如画。🌿",
                "清晨的露水，伴着花香，道一声早安。🌸",
                "春日黎明，万物复苏，今天也要活力满满！",
                "早安，愿春风为你吹来一天的好运。🍃",
                "听，窗外是不是有鸟儿在歌唱？早安！🐦",
                "新的一天，从一个清新的春日早晨开始。",
                "一年之计在于春，一日之计在于晨，加油！",
                "拉开窗帘，让第一缕春光拥抱你。☀️"
            ],
            afternoon: [
                "下午好，春日暖阳，适合小憩片刻。☀️",
                "午后时光，泡杯花茶，享受春日的悠闲吧。🍵",
                "愿你心情如春日午后的阳光，明媚不忧伤。",
                "春天到，别春困，起来活动一下筋骨吧！",
                "天气这么好，不去公园散散步吗？",
                "午后的阳光，暖得让人想打瞌睡。😴",
                "泡一壶龙井，静品春日的午后时光。",
                "春雷阵阵，说不定会有一场春雨，记得带伞。"
            ],
            evening: [
                "晚上好，春风拂面，一天的疲惫都消散了。🎑",
                "夜幕降临，静享春夜的温柔与宁静。",
                "春夜的星空格外明朗，祝你晚安好梦。✨",
                "在温柔的春夜里，和世界道一句晚安。",
                "春天的晚霞总是格外温柔，晚上好。",
                "忙碌了一天，是时候享受一顿美味的晚餐了。🍲",
                "晚风轻轻，吹来青草和泥土的芬芳。",
                "今晚月色真美，风也温柔，祝你愉快。"
            ],
            night: [
                "夜深了，春夜微凉，记得盖好被子。🌙",
                "晚安，愿你在梦里与最美的春天相遇。",
                "放下手机，闭上眼睛，聆听春虫的鸣叫。😴",
                "夜阑人静，祝你安眠，明日又是崭新的一天。",
                "春夜宁静，宜读一本闲书，安然入睡。",
                "把今天份的开心打包，睡个好觉吧。",
                "晚安，愿你的梦里繁花似锦。🌸",
                "夜了，全世界都睡了，你也要早点休息。"
            ]
        },
        summer: {
            morning: [
                "早上好，夏日清晨，阳光正好，微风不燥。☀️",
                "早安！今天也是元气满满的一天，别怕热！",
                "夏日的清晨，是西瓜味的，是冰汽水味的。🍉",
                "蝉鸣声声，唤醒了夏天的早晨，早安！",
                "早安！今天的太阳也很热情呢！",
                "赶在热浪来临前，享受清晨的片刻凉爽吧。",
                "又是被阳光叫醒的一天，你好呀！",
                "新的一天，像加了冰块的汽水，充满活力！"
            ],
            afternoon: [
                "下午好，夏日炎炎，记得多喝水防暑哦。💧",
                "午后困倦，来根冰棍提提神吧！🍦",
                "心静自然凉，愿你拥有一个清爽的下午。",
                "夏日午后，宜开空调，宜听音乐，宜想你。😉",
                "热到融化的下午，你还好吗？",
                "“哪儿凉快待着去”，是夏天最真诚的祝福。",
                "这个钟点，唯有空调和西瓜不可辜负。🍉"
            ],
            evening: [
                "晚上好，夏夜晚风，吹散白天的燥热。🎐",
                "提着一瓶汽水，坐在台阶上，感受夏天的晚风。",
                "属于夏天的夜晚，是烧烤、小龙虾和冰啤酒。🍻",
                "晚风轻踩着云朵，月亮在贩售快乐，晚安！",
                "晚风吹走了热气，带来了夏夜的惬意。",
                "又到了可以去夜市逛吃逛吃的季节！",
                "小时候的夏夜，是蒲扇、凉席和满天繁星。✨",
                "晚上好，去散散步吧，说不定能看到萤火虫。"
            ],
            night: [
                "夜深了，晚安，愿你的梦里有凉爽的夏风。🌌",
                "仲夏夜之梦，愿你拥抱整片星空。✨",
                "晚安，月亮警察已就位，请安心入睡。👮",
                "嘘，静下心来，听听窗外的虫鸣。",
                "晚安，空调调到26度刚刚好哦。😉",
                "别熬夜了，你的皮肤和头发都需要休息。",
                "祝你做个凉爽的梦，梦里没有蚊子。🦟"
            ]
        },
        autumn: {
            morning: [
                "早上好，秋高气爽，愿你今天也心情舒畅。🍁",
                "早安，空气中有了秋天的味道，深呼吸一下吧。",
                "秋日的晨光，温柔地洒在每一片落叶上，早安。",
                "天凉了，记得多穿件衣服，别感冒了哦。🧥",
                "秋日的天空，蓝得像一块画布，早安。",
                "早晨的空气微凉，记得添一件薄外套。",
                "秋天，是一个让一切都沉静下来的季节，早。",
                "又是被梦想叫醒的一天，加油，打工人！"
            ],
            afternoon: [
                "下午好，秋日的午后，阳光温暖得刚刚好。☕️",
                "捧一杯热茶，读一本好书，享受秋日的静谧。",
                "秋天是收获的季节，愿你的努力都有回报。",
                "午安，愿秋风带走你的烦恼和疲惫。🍂",
                "秋日的午后，每一帧都像电影画面。🎬",
                "阳光正好，温度也正好，一切都刚刚好。",
                "来块烤红薯或是糖炒栗子怎么样？🌰",
                "下午犯困的话，就看看窗外的蓝天白云吧。"
            ],
            evening: [
                "晚上好，秋风送爽，月色宜人。🌕",
                "丹桂飘香的夜晚，适合思念和团圆。",
                "秋天的夜晚，是思念的季节，也是养膘的季节。",
                "晚来秋，天凉如水，早点休息吧。",
                "晚上好，今天你看到美丽的落日了吗？",
                "秋天的夜晚，总让人感觉格外宁静和舒适。",
                "天气转凉，晚餐要吃得暖暖和和的。",
                "月亮挂在枝头，像一颗熟透的果子。晚安。"
            ],
            night: [
                "夜深了，秋意渐浓，晚安好梦。🌙",
                "愿你伴着窗外的桂花香，甜甜地进入梦乡。",
                "天阶夜色凉如水，卧看牵牛织女星。晚安。",
                "被子要盖厚一点了，夜里会降温的。😴",
                "夜深了，把心事放一边，好好睡觉最重要。",
                "秋夜微凉，盖着柔软的被子，最是舒服。😴",
                "晚安，愿你梦里有金色的麦田和果实。",
                "明天会更好，快睡吧。"
            ]
        },
        winter: {
            morning: [
                "早上好，虽然天气寒冷，但也要拥抱阳光哦。❄️",
                "早安，冬日醒来有阳光，就是最幸福的事。",
                "起床大作战开始了！祝你成功！💪",
                "冬日清晨，来一杯热饮，温暖一整天。☕️",
                "早安！今天你和你的床分离成功了吗？",
                "窗户上结了霜花，冬天真的来啦。❄️",
                "热气腾腾的早餐，是对冬天早晨最大的尊重。",
                "呼一口气都是白色的，这才是冬天的感觉。"
            ],
            afternoon: [
                "下午好，晒晒冬日的太阳，整个人都暖洋洋的。",
                "泡个热水脚，是对冬天下午最好的尊重。",
                "天气这么冷，不如…吃顿火锅？🍲",
                "愿这个冬天，有人与你立黄昏，问你粥可温。",
                "冬日的午后短暂又珍贵，多晒晒太阳吧。",
                "一杯热可可，一份好心情，送给下午的你。☕️",
                "外面天寒地冻，还是待在室内最舒服了。",
                "离天黑又近了一步，珍惜白天的时光。"
            ],
            evening: [
                "晚上好，窗外天寒地冻，屋内温暖如春。",
                "冬天最适合窝在沙发里，看一部温暖的电影。🎬",
                "雪落下的声音，是冬夜的交响曲。",
                "晚来天欲雪，能饮一杯无？",
                "晚上好，回家路上注意保暖呀。",
                "冬夜的灯火，看起来总是格外温暖。",
                "忙了一天，窝在沙发里就是最大的幸福。",
                "天冷了，今晚吃点热乎的吧！"
            ],
            night: [
                "夜深了，钻进温暖的被窝，和世界说晚安。🛌",
                "晚安，愿你一夜无梦，安睡到天亮。",
                "冬天，是适合早睡的季节，晚安。",
                "请查收你的冬日限定好梦。🌙",
                "晚安，让温暖的被窝治愈你的一切。",
                "听着窗外的风声，安稳地睡吧。",
                "别熬夜了，对得起这么冷的天吗？快去睡觉！",
                "晚安，愿你梦里阳光普照，春暖花开。"
            ]
        },
        default: [
            "你好呀，今天过得怎么样？",
            "愿你眼里的星星，永远闪亮。",
            "无论天气如何，记得带上自己的阳光。",
            "希望你今天也能开心！",
            "嘿，陌生人，祝你今天开心。",
            "生活或许不易，但请别忘了微笑。😊",
            "每一天都是一份独一无二的礼物。",
            "偷偷告诉你，你很棒！",
            "愿你所到之处皆热土，所遇之人皆良善。"
        ]
    };

    // 1. 判断季节
    let season = 'default';
    if (month >= 3 && month <= 5) season = 'spring';
    else if (month >= 6 && month <= 8) season = 'summer';
    else if (month >= 9 && month <= 11) season = 'autumn';
    else season = 'winter';

    // 2. 判断时段
    let timeOfDay = 'night';
    if (hour >= 5 && hour < 12) timeOfDay = 'morning';
    else if (hour >= 12 && hour < 18) timeOfDay = 'afternoon';
    else if (hour >= 18 && hour < 22) timeOfDay = 'evening';

    // 3. 根据季节和时段，获取可用的问候语列表（如果找不到则使用默认列表）
    const availableGreetings = greetings[season][timeOfDay] || greetings.default;
    // 4. 从列表中随机选择一条
    const randomGreeting = availableGreetings[Math.floor(Math.random() * availableGreetings.length)];
    // 5. 更新UI
    greetingEl.textContent = randomGreeting;
}

/**
 * @description 初始化问候语功能。
 * 它会在页面加载时立即更新一次，然后设置一个定时器，每30分钟刷新一次。
 */
export function initializeGreeting() {
    updateGreeting();
    setInterval(updateGreeting, 1800000); // 1800000ms = 30 minutes
}
