/*
 * @file: music-player.css
 * @description: 定义新年主题中黑胶唱片机音乐播放器的样式。
 */

/* --- 音乐播放器按钮容器 --- */
#new-year-music-btn {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    
    /* [修改] 为平滑的显示/隐藏过渡添加 opacity, visibility 和 transform */
    opacity: 0;
    visibility: hidden;
    transform: scale(0.9);
    transition: opacity 0.3s ease, visibility 0s linear 0.3s, transform 0.3s ease;
    
    /* `position: fixed` 由 Tailwind 的 'fixed' class 提供 */
}

/* 可见状态 */
#new-year-music-btn.visible {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
    transition-delay: 0s; /* 立即显示 */
}

/* 交互动画 */
#new-year-music-btn:hover {
    transform: scale(1.1);
}
#new-year-music-btn:active {
     transform: scale(1.05);
     transition-duration: 0.1s;
}


/* --- 黑胶唱片本身 --- */
.music-player-vinyl {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: #111; /* 唱片底色 */
    /* 模拟唱片上的纹理 */
    background-image: repeating-radial-gradient(circle at center, rgba(255,255,255,0.05) 0, rgba(255,255,255,0.05) 1px, transparent 1px, transparent 2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.4); /* 阴影效果 */
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    
    /* [修复] 直接应用动画，并将其初始播放状态设为暂停 */
    animation: spin 4s linear infinite;
    animation-play-state: paused;
}

/* 唱片的高光效果 */
.music-player-vinyl::after {
    content: '';
    position: absolute;
    top: -10%;
    left: -10%;
    width: 120%;
    height: 120%;
    background: radial-gradient(ellipse at 30% 30%, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 50%);
    transform: rotate(-30deg);
    pointer-events: none; /* 不响应鼠标事件 */
}

/* [修复] 使用 animation-play-state 来控制旋转，而不是添加/移除整个动画类 */
#new-year-music-btn.is-playing .music-player-vinyl {
    animation-play-state: running; /* 播放时旋转 */
}


/* --- 专辑封面 --- */
.album-art {
    width: 60%; /* 调整尺寸 */
    height: 60%; /* 调整尺寸 */
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
}


/* --- 播放/暂停图标遮罩层 --- */
.vinyl-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem; /* 20px, 缩小图标以获得更精致的外观 */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    pointer-events: none; /* 让点击事件穿透到下方的按钮 */
}

/* 悬停或暂停时显示遮罩层 */
#new-year-music-btn:hover .vinyl-overlay,
#new-year-music-btn.is-paused .vinyl-overlay {
    opacity: 1;
}

/* 播放/暂停图标的样式和过渡 */
.vinyl-overlay .icon-play,
.vinyl-overlay .icon-pause {
    position: absolute;
    opacity: 0;
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    transform: scale(0.8);
}

/* 暂停时显示播放图标 */
#new-year-music-btn.is-paused .icon-play {
    opacity: 1;
    transform: scale(1);
}

/* 播放时显示暂停图标 */
#new-year-music-btn.is-playing .icon-pause {
    opacity: 1;
    transform: scale(1);
}
